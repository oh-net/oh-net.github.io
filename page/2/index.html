<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Hello,Stranger</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="$$ Welcome 2 mine blog $$">
<meta property="og:type" content="website">
<meta property="og:title" content="Hello,Stranger">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Hello,Stranger">
<meta property="og:description" content="$$ Welcome 2 mine blog $$">
<meta property="og:locale" content="zh-cn">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hello,Stranger">
<meta name="twitter:description" content="$$ Welcome 2 mine blog $$">
  
    <link rel="alternate" href="/atom.xml" title="Hello,Stranger" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hello,Stranger</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Yet another note</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-874" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/16/874/" class="article-date">
  <time datetime="2017-08-16T05:26:29.000Z" itemprop="datePublished">2017-08-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/数据库/">数据库</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/16/874/">mysql默认时间日期</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>MySQL设置当前时间为默认值的问题我们经常会遇到，下面就为您介绍MySQL设置当前时间为默认值的实现全步骤，希望对您能有所启迪。</p>
<ul>
<li>数据库：test_db1</li>
<li>创建表：test_ta1</li>
<li><p>两个字段：</p>
<ol>
<li>id （自增 且为主键），</li>
<li><p>createtime 创建日期（默认值为当前时间）</p>
<p>– mysql默认时间日期<br>use test_db1;  </p>
</li>
</ol>
<p>create table test_ta1(  </p>
<p>id mediumint(8) unsigned not nulll auto_increment,  </p>
<p>createtime timestamp not null default current_timestamp,  </p>
<p>primary key (id)</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/16/874/" data-id="cjpkxzik30001vd811htxuf2i" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/date/">date</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/time/">time</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/timestamp/">timestamp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日期时间/">日期时间</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-a-freebsd-11-desktop-how-to" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/07/a-freebsd-11-desktop-how-to/" class="article-date">
  <time datetime="2017-08-06T21:36:04.000Z" itemprop="datePublished">2017-08-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/操作系统/">操作系统</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/07/a-freebsd-11-desktop-how-to/">A FreeBSD 11 Desktop How-to</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="A-FreeBSD-11-Desktop-How-to"><a href="#A-FreeBSD-11-Desktop-How-to" class="headerlink" title="A FreeBSD 11 Desktop How-to"></a>A FreeBSD 11 Desktop How-to</h1><p>FreeBSD is a fast, secure, modern <a href="https://en.wikipedia.org/wiki/Unix-like" target="_blank" rel="noopener">Unix-like</a> operating system with a fantastic community, great documentation, and powerful technologies like ZFS and LLVM. It’s my operating system of choice for everything from my i7-2600k desktop to my home router to my ARM plug computer jukebox. Though famed for its uptime in the datacenter the same OS is just as suited to desktop or laptop computing with a little work. Why use FreeBSD? Maybe I’m just getting old, but it’s nice to use an operating system that didn’t spawn a billion-dollar anti-malware industry through frequent security failings, where you can choose the interface you like and reasonably expect it to stay that way instead of being forced into the <a href="https://en.wikipedia.org/wiki/Windows_Aero" target="_blank" rel="noopener">design</a> <a href="https://en.wikipedia.org/wiki/Metro_%28design_language%29" target="_blank" rel="noopener">fad</a> <a href="https://en.wikipedia.org/wiki/Aqua_%28user_interface%29" target="_blank" rel="noopener">du</a> <a href="https://en.wikipedia.org/wiki/Brushed_Metal_%28interface%29" target="_blank" rel="noopener">jour</a>, where you don’t have to argue about the init system being replaced <a href="https://en.wikipedia.org/wiki/Upstart" target="_blank" rel="noopener">two</a> <a href="https://en.wikipedia.org/wiki/Systemd" target="_blank" rel="noopener">times</a> in the same decade, and whose key organizations don’t collectively <a href="https://lwn.net/Articles/500231/" target="_blank" rel="noopener">kowtow to Microsoft</a> when convenient. I’ve used many operating systems and have yet to find one more consistent and cohesive yet as well-supported as the BSD family, and FreeBSD is the one with the biggest community and most available drivers for things like graphics cards. “FreeBSD on the server, Linux on the desktop” is an oft-seen sentiment among some FreeBSD enthusiasts, and it’s sort of understandable considering the conservative out-of-the-box FreeBSD installation. Despite that, FreeBSD is just a few settings away from being an easy, powerful Desktop OS rivaling Linux, complete with the same software ecosystem available through the Ports collection. Unlike Linux where everything including the kernel is a package, FreeBSD is developed in a single source tree and released on a set schedule – twice a year – as a complete operating system on top of which you can install third-party software. The <a href="http://www.freebsd.org/releng/" target="_blank" rel="noopener">Release Engineering</a> page tracks the release history and schedule. Two major branches see releases in parallel, and major branches tend to live for two years (four minor versions) after their x.0 release. FreeBSD 11.x is currently the newest release branch with 10.x in maintenance mode and major development happening on 12.x. This guide attempts to show users with various hardware configurations the best way to configure a usable modern workstation running FreeBSD based on my own experience with Emi, my FreeBSD workstation. There are projects such as TrueOS and GhostBSD that can give you a good out-of-the-box desktop FreeBSD experience, but I find them disconnected from the underlying operating systems because they dump you into KDE or XFCE and attempt to hide as much of FreeBSD as possible behind graphical configuration. That’s not a bad thing, and I’m glad those projects exist, but this guide gets there in the other direction. You will install FreeBSD, learn how it works, and configure it into a great desktop. Compare this guide to something like <a href="http://www.linuxfromscratch.org/lfs/read.html" target="_blank" rel="noopener">Linux From Scratch</a> or a <a href="https://www.gentoo.org/doc/en/handbook/handbook-amd64.xml" target="_blank" rel="noopener">Gentoo installation</a> and you’ll see what a breeze this really is. Let’s do it!</p>
<h2 id="New-Installations"><a href="#New-Installations" class="headerlink" title="New Installations"></a>New Installations</h2><p>The <a href="http://www.freebsd.org/where.html" target="_blank" rel="noopener">Getting FreeBSD</a> page has links to ISOs for the six <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/articles/committers-guide/archs.html#idp67604144" target="_blank" rel="noopener">tier 1</a> architectures. This guide focuses on amd64/i386 PCs though is broadly applicable to them all. The ISOs are available in <code>bootonly</code>, CD, DVD, and <code>memstick</code>. I usually grab the nearest &gt;1GB USB drive and <a href="http://www.freebsd.org/cgi/man.cgi?query=dd&amp;ektion=&amp;manpath=" title="man dd" target="_blank" rel="noopener">dd</a> the newest <code>memstick</code> image to it. The larger DVD images are available complete with Ports distribution files for those doing fully-offline installations. Boot the chosen installation media via whatever means your computer can (EFI boot menu, BIOS setting, fallback) and get ready to install. FreeBSD will boot to <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/using-bsdinstall.html" target="_blank" rel="noopener">bsdinstall</a> and offer to Install, load an interactive rescue shell, or just boot normally off the installation disk. Choose <code>Install</code>, choose the keyboard mapping appropriate for your computer, and enter a hostname for your machine. When asked to choose system components I recommend selecting all of them. <code>doc</code> is useful to have locally if your Internet connection isn’t working, and system <code>src</code> is needed for some Ports to build and install.</p>
<h3 id="Disks"><a href="#Disks" class="headerlink" title="Disks"></a>Disks</h3><p>On the next screen, Partitioning, select either the <code>Auto (ZFS)</code> option or the <code>Auto (UFS)</code> option. UFS is the traditional <a href="https://en.wikipedia.org/wiki/Unix_File_System" target="_blank" rel="noopener">Unix file system</a> and is usable on any machine. It is fragile in the case of power loss or crashes unless journaled. <a href="https://en.wikipedia.org/wiki/ZFS" target="_blank" rel="noopener">ZFS</a>, on the other hand, is both a volume (pool) manager and a great filesystem. I strongly recommend ZFS for modern computers due to its resilience and rich feature set that makes it very practical for desktop use. It checksums your data constantly to ensure integrity and prevent silent corruption on-disk, and its copy-on-write model never overwrites blocks, eliminating the <a href="https://en.wikipedia.org/wiki/RAID#Atomicity:_including_parity_inconsistency_due_to_system_crashes" target="_blank" rel="noopener">RAID-5 write hole</a>. It supports snapshots, allowing you to snapshot a filesystem at an arbitrary point in time and roll back to it at will, like Apple’s Time Machine, and snapshots can be sent seamlessly across a network for incremental backups. It supports SSD cache devices to speed up reads and writes of pools backed by magnetic hard drives. It can deduplicate files, reducing the on-disk space for files that are significantly identical at the cost of lots of RAM. Achieving these features makes ZFS very memory-hungry. Plan to have 1GiB of physical memory for every 1TB of space in a zpool and much more if deduplication is used. ZFS can be <a href="https://wiki.freebsd.org/ZFSTuningGuide" target="_blank" rel="noopener">tuned</a> for tighter memory limitations, but very limited systems should use UFS instead. Most modern machines should not need to tune ZFS at all. It will use the memory available to it but also respond to memory pressure when other processes need RAM. Assuming you choose ZFS, set up your zpool. The pool can be a single disk (still called <code>stripe</code> but just striped with itself), a mirror, or any combination of disks in RAID-Z. Name the pool something. I usually name boot pools after the hostname of the machine and then data pools by function. The other ZFS options are dictated by your hardware. <img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/02bde3cb8e687908cbebb2c3d58bf5b7.png" alt=""> If you have an <a href="https://en.wikipedia.org/wiki/Advanced_Format" target="_blank" rel="noopener">Advanced Format</a> hard disk (any made in the last few years) or an SSD you should force 4k sectors. If your computer has a recent Intel or AMD CPU supporting <a href="https://en.wikipedia.org/wiki/AES_instruction_set" target="_blank" rel="noopener">AES instruction set</a> there is very little downside to encrypting your pool. I recommend it for any pool that doesn’t need to automatically mount at boot, i.e. I use encryption on my workstation but not on my FreeBSD router. Encrypting multiple physical devices with the same key will only require the passphrase once. You will be prompted for the passphrase while the kernel has loaded and is detecting hardware. On my system the passphrase prompt usually gets buried under my USB devices as the kernel enumerates them, so if you find yourself stuck there at boot hit a few keys and Enter to make the passphrase prompt reappear. Use <a href="https://en.wikipedia.org/wiki/GUID_Partition_Table" target="_blank" rel="noopener">GUID Partition Table</a> (GPT) if your computer uses EFI. PCs with BIOS most likely need to use a legacy <a href="https://en.wikipedia.org/wiki/Master_Boot_Record" target="_blank" rel="noopener">MBR</a>. GPT is a requirement to use disks over 2TB in size because MBR can address a maximum of 232 x 512 bytes, just larger than 2TB. The amount of swap space you use if any is dictated by the amount of memory in your computer and the loads you plan to place on it. Conventional wisdom says to use a swap size double the amount of physical memory in the machine, but I find that to apply less and less when you get up into double-digit gigabytes of RAM. My computer has 16GiB or physical memory and 8GiB of swap space defined. On some systems I don’t touch swap at all, but I recommend having at least some. You can enlarge it later.</p>
<h3 id="Finish"><a href="#Finish" class="headerlink" title="Finish"></a>Finish</h3><p>Once your disks are set up the installer will copy files and prompt you for the base configuration of things such root password, time zone, and network options. It will ask you to add at least one non-root user. When creating your personal user account be sure to invite it to the <code>wheel</code> and <code>operator</code> user groups. <code>wheel</code> membership is necessary to gain root privileges for administration tasks, and you will assign <code>operator</code> device permissions later in this guide. When prompted you can remove the install disk and reboot into your new system!</p>
<h2 id="Upgrading"><a href="#Upgrading" class="headerlink" title="Upgrading"></a>Upgrading</h2><p>Are you running a previous version already? The upgrade process is covered in full in <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/updating-upgrading.html" target="_blank" rel="noopener">Chapter 24</a> of the Handbook, but assuming you are running the stock <code>GENERIC</code> kernel the process is very simple using <code>freebsd-update</code>. Check my <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#upgrade-notes" target="_blank" rel="noopener">upgrade notes</a> section for specific version instructions. First, fetch the new system using <code>freebsd-update install</code> by specifying the <code>-r</code> argument. Without <code>-r</code> it will just fetch security and errata updates for your current minor version. You can upgrade to a new minor version in your current major or to a new major version entirely. If you’re upgrading to a new major version, go to the <code>.0</code> release first. Don’t upgrade from, say, <code>8.4-RELEASE</code> to <code>9.3-RELEASE</code>, but to <code>9.0-RELEASE</code> first and then to <code>9.3</code>.  </p>
<pre><code>freebsd-update upgrade -r 11.0-RELEASE
</code></pre><p><code>upgrade</code> is interactive and will ask you to confirm the system components it thinks you have installed. Once it fetches the updated system files you can begin the installation process.  </p>
<pre><code>freebsd-update install
</code></pre><p>This will install the new kernel but not any non-kernel OS components like userland executables. Reboot via <code>shutdown -r now</code>, <code>reboot</code>, or a swift kick to the power switch. When the system comes up, log in as root and install the new userland by re-running the install command.  </p>
<pre><code>freebsd-update install
</code></pre><p>At this point your OS itself is ready to go but your packages need to be updated to run on the new major version via your <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#staying-up-to-date" target="_blank" rel="noopener">preferred method</a>, such as <code>pkg-static upgrade -f</code> for binary packages or<code>portupgrade`</code>, or<code>portmaster -af`</code> if you prefer to build ports. It is alternatively possible to maintain ABI compatibility with an older major version of FreeBSD by installing a compatibility library package such as <a href="http://freshports.org/misc/compat9x" title="misc/compat9x" target="_blank" rel="noopener">misc/compat9x</a>, but you shouldn’t unless you need it for a particular binary that isn’t available as source to build for the new version. Once that’s done you can run <code>freebsd-update install</code> one last time to chean out the shared libraries from the previous version. Reboot once more to your final updated system.</p>
<h2 id="First-Boot"><a href="#First-Boot" class="headerlink" title="First Boot"></a>First Boot</h2><p>Log in as root with the password you configured in the installer. Congratulations! You are now a FreeBSD user! The FreeBSD base system is a fully-featured operating system but as you can see does not contain a graphical environment or any third-party software like your typical Linux distribution. Before installing any of that you should configure your new system to be a better desktop. FreeBSD’s roots are in academia and the datacenter, so its default configuration is very conservative. The desktop or laptop computer you are most likely using is vastly more powerful than some of the configurations that will run FreeBSD, so there is room to grow without being unreasonable. You will need a text editor to edit configuration files. The base system ships with <a href="http://www.freebsd.org/cgi/man.cgi?query=vi&amp;ektion=&amp;manpath=" title="man vi" target="_blank" rel="noopener">vi</a> (not vim!) but for most users I would recommend <a href="http://www.freebsd.org/cgi/man.cgi?query=ee&amp;ektion=&amp;manpath=" title="man ee" target="_blank" rel="noopener">ee</a>. It’s part of the base system and is a simple but fully-featured editor like nano from the Linux world. If you aren’t happy with <code>ee</code> there are plenty of great editors you can install from Ports, like <a href="http://freshports.org/editors/vim" title="editors/vim" target="_blank" rel="noopener">editors/vim</a>, but let’s continue. If you aren’t entirely comfortable with editing config files you can re-access the graphical configuration screen from the installer by running <a href="http://www.freebsd.org/cgi/man.cgi?query=bsdconfig&amp;ektion=&amp;manpath=" title="man bsdconfig" target="_blank" rel="noopener">bsdconfig</a> as root, but I don’t think you’d be reading this page if that’s the case :)</p>
<h3 id="UTF-8"><a href="#UTF-8" class="headerlink" title="UTF-8"></a>UTF-8</h3><p>The <code>LANG=xx_YY.ZZZZ</code> <a href="https://en.wikipedia.org/wiki/Environment_variable" target="_blank" rel="noopener">environment variable</a> sets the system <a href="https://en.wikipedia.org/wiki/Locale" target="_blank" rel="noopener">locale</a> to language code <code>xx</code>, country code <code>YY</code>, and <a href="https://en.wikipedia.org/wiki/Character_encoding" target="_blank" rel="noopener">character encoding</a> <code>ZZZZ</code>. Language and country code affect default application language, number formatting, date and time formatting, string collation, currency settings, and more. By enabling a locale using UTF-8 character encoding, the system can understand and display each of the 1112064 characters in the <a href="https://en.wikipedia.org/wiki/Unicode" target="_blank" rel="noopener">Unicode character set</a>, instead of just US ASCII as is default with <code>LANG=C</code>. Check <code>locale -a | grep UTF-8</code> for a list of every available UTF-8 locale on your computer. As an American anglophone, I use <code>en_US.UTF-8</code>. Edit the login class capability database in /etc/<a href="http://www.freebsd.org/cgi/man.cgi?query=login.conf&amp;ektion=&amp;manpath=" title="man login.conf" target="_blank" rel="noopener">login.conf</a> to add a default character set and locale. Login shells will inherit the environment variables defined here in the <code>default</code> class or in a narrower class if it matches one. /etc/login.conf</p>
<pre><code>--- login.conf.default    2012-01-02 17:08:05.804291477 -0500
+++ login.conf    2012-01-02 17:08:16.996213774 -0500
@@ -44,7 +44,9 @@
     :pseudoterminals=unlimited:
     :priority=0:
     :ignoretime@:
-    :umask=022:
+    :umask=022:
+    :charset=UTF-8:
+    :lang=en_US.UTF-8:
</code></pre><p>Rebuild the login database with <code>cap_mkdb /etc/login.conf</code> after making changes. You may have to specify the new locale elsewhere (like <code>/etc/profile</code>) for non login shell uses such as GDM and other login managers. /etc/profile</p>
<pre><code>LANG=en_US.UTF-8;   export LANG
CHARSET=UTF-8;  export CHARSET
</code></pre><p>You can read more in the <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/using-localization.html" target="_blank" rel="noopener">Using Localization</a> chapter of the Handbook. Check your work by running <a href="http://www.freebsd.org/cgi/man.cgi?query=locale&amp;ektion=&amp;manpath=" title="man locale" target="_blank" rel="noopener">locale</a> on your next login. locale</p>
<pre><code>LANG=en_US.UTF-8
LC_CTYPE=&quot;en_US.UTF-8&quot;
LC_COLLATE=&quot;en_US.UTF-8&quot;
LC_TIME=&quot;en_US.UTF-8&quot;
LC_NUMERIC=&quot;en_US.UTF-8&quot;
LC_MONETARY=&quot;en_US.UTF-8&quot;
LC_MESSAGES=&quot;en_US.UTF-8&quot;
LC_ALL=en_US.UTF-8
</code></pre><h3 id="Tuning-and-drivers"><a href="#Tuning-and-drivers" class="headerlink" title="Tuning and drivers"></a>Tuning and drivers</h3><p>Change a few <a href="http://www.freebsd.org/cgi/man.cgi?query=sysctl&amp;ektion=&amp;manpath=" title="man sysctl" target="_blank" rel="noopener">sysctl</a> variables to enhance the experience of FreeBSD on the desktop, including expanding the amount of shared memory, tuning the <a href="http://www.freebsd.org/cgi/man.cgi?query=sched_ule&amp;ektion=4&amp;manpath=FreeBSD%2011.0-RELEASE" title="man sched_ule from FreeBSD 11.0-RELEASE" target="_blank" rel="noopener">process scheduler</a> for desktop use, and increasing the limit of simultaneously-open files to something sensible. /etc/sysctl.conf</p>
<pre><code># Enhance shared memory X11 interface
kern.ipc.shmmax=67108864
kern.ipc.shmall=32768

# Enhance desktop responsiveness under high CPU use (200/224)
kern.sched.preempt_thresh=224

# Bump up maximum number of open files
kern.maxfiles=200000

# Disable PC Speaker
hw.syscons.bell=0

# Shared memory for Chromium
kern.ipc.shm_allow_removed=1
</code></pre><p>Some knobs can only be set at boot by the <a href="http://www.freebsd.org/cgi/man.cgi?query=loader&amp;ektion=&amp;manpath=" title="man loader" target="_blank" rel="noopener">loader</a> by setting them in <code>/boot/loader.conf</code>. This is also where we define kernel modules to load at boot. /boot/loader.conf</p>
<pre><code># Devil worship in loader logo
loader_logo=&quot;beastie&quot;

# Boot-time kernel tuning
kern.ipc.shmseg=1024
kern.ipc.shmmni=1024
kern.maxproc=100000

# Load MMC/SD card-reader support
mmc_load=&quot;YES&quot;
mmcsd_load=&quot;YES&quot;
sdhci_load=&quot;YES&quot;

# Access ATAPI devices through the CAM subsystem
atapicam_load=&quot;YES&quot;

# Filesystems in Userspace
fuse_load=&quot;YES&quot;

# Intel Core thermal sensors
coretemp_load=&quot;YES&quot;

# AMD K8, K10, K11 thermal sensors
amdtemp_load=&quot;YES&quot;

# In-memory filesystems
tmpfs_load=&quot;YES&quot;

# Asynchronous I/O
aio_load=&quot;YES&quot;

# Handle Unicode on removable media
libiconv_load=&quot;YES&quot;
libmchain_load=&quot;YES&quot;
cd9660_iconv_load=&quot;YES&quot;
msdosfs_iconv_load=&quot;YES&quot;
</code></pre><p>Finally, enable everything else. /etc/rc.conf</p>
<pre><code>moused_enable=&quot;YES&quot;

# powerd: hiadaptive speed while on AC power, adaptive while on battery power
powerd_enable=&quot;YES&quot;
powerd_flags=&quot;-a hiadaptive -b adaptive&quot;

# Enable BlueTooth
hcsecd_enable=&quot;YES&quot;
sdpd_enable=&quot;YES&quot;

# Synchronize system time
ntpd_enable=&quot;YES&quot;
# Let ntpd make time jumps larger than 1000sec
ntpd_flags=&quot;-g&quot;
</code></pre><p>Enable remote access via SSH if you plan to use it. Otherwise, there’s no need to expose your system. /etc/rc.conf</p>
<pre><code># Remote logins
sshd_enable=&quot;YES&quot;
</code></pre><h3 id="Mounts"><a href="#Mounts" class="headerlink" title="Mounts"></a>Mounts</h3><p>The <a href="http://www.freebsd.org/cgi/man.cgi?query=procfs&amp;ektion=&amp;manpath=" title="man procfs" target="_blank" rel="noopener">procfs</a> and <a href="http://www.freebsd.org/cgi/man.cgi?query=fdescfs&amp;ektion=&amp;manpath=" title="man fdescfs" target="_blank" rel="noopener">fdescfs</a> virtual filesystems are not a default part of BSD but are frequently required for compatibility with programs and environments written with Linux in mind, such as GNOME/MATE and KDE. The FreeBSD equivalent is <a href="http://www.freebsd.org/cgi/man.cgi?query=sysctl&amp;ektion=&amp;manpath=" title="man sysctl" target="_blank" rel="noopener">sysctl</a>, but you can mount <code>/proc</code> too if you plan to use software requiring it. Some special filesystems like <code>fdescfs</code> must be mounted <code>late</code> on ZFS-rooted systems since the location of their mountpoint won’t exist until late in the boot process. /etc/fstab</p>
<pre><code>proc    /proc    procfs    rw    0    0
fdesc    /dev/fd    fdescfs    rw,auto,late    0    0
</code></pre><p>Toggle the sysctl that lets users mount disks. /etc/sysctl.conf</p>
<pre><code># Allow users to mount disks
vfs.usermount=1
</code></pre><p>If you neglected to add your personal user account to the <code>wheel</code> and <code>operator</code> groups at creation, now is a good time to do so. <code>wheel</code> membership lets you use <a href="http://www.freebsd.org/cgi/man.cgi?query=su&amp;ektion=&amp;manpath=" title="man su" target="_blank" rel="noopener">su</a> to become root, and <code>operator</code> membership is required for device permissions in this configuration. In this example my user is <code>okeeblow</code>. Substitute it for yours.  </p>
<pre><code>pw usermod okeeblow -G wheel
pw usermod okeeblow -G operator
</code></pre><h3 id="Device-Permissions"><a href="#Device-Permissions" class="headerlink" title="Device Permissions"></a>Device Permissions</h3><p>Relax default permissions on the <a href="http://www.freebsd.org/cgi/man.cgi?query=devfs&amp;ektion=&amp;manpath=FreeBSD%2011.0-RELEASE" title="man devfs from FreeBSD 11.0-RELEASE" target="_blank" rel="noopener">device filesystem</a> to allow normal users access to a variety of disks and input/output devices. Permissions for devices existing at boot time are set in <a href="http://www.freebsd.org/cgi/man.cgi?query=devfs.conf&amp;ektion=&amp;manpath=" title="man devfs.conf" target="_blank" rel="noopener">devfs.conf</a>. Each line defines a full device path and octal permission value. /etc/devfs.conf</p>
<pre><code># Allow all users to access optical media
perm    /dev/acd0       0666
perm    /dev/acd1       0666
perm    /dev/cd0        0666
perm    /dev/cd1        0666

# Allow all USB Devices to be mounted
perm    /dev/da0        0666
perm    /dev/da1        0666
perm    /dev/da2        0666
perm    /dev/da3        0666
perm    /dev/da4        0666
perm    /dev/da5        0666

# Misc other devices
perm    /dev/pass0      0666
perm    /dev/xpt0       0666
perm    /dev/uscanner0  0666
perm    /dev/video0     0666
perm    /dev/tuner0     0666
perm    /dev/dvb/adapter0/demux0    0666
perm    /dev/dvb/adapter0/dvr       0666
perm    /dev/dvb/adapter0/frontend0 0666
</code></pre><p>For devices that may be connected post-boot, we add an entry to a <a href="http://www.freebsd.org/cgi/man.cgi?query=devfs.rules&amp;ektion=&amp;manpath=" title="man devfs.rules" target="_blank" rel="noopener">devfs.rules</a> ruleset. Rulesets must have a unique name and number, and their rules are composed of a path or quoted path <a href="https://en.wikipedia.org/wiki/Glob_%28programming%29" target="_blank" rel="noopener">glob</a> and octal permission value. /etc/devfs.rules</p>
<pre><code>[devfsrules_common=7]
add path &apos;ad[0-9]*&apos;        mode 666
add path &apos;ada[0-9]*&apos;    mode 666
add path &apos;da[0-9]*&apos;        mode 666
add path &apos;acd[0-9]*&apos;    mode 666
add path &apos;cd[0-9]*&apos;        mode 666
add path &apos;mmcsd[0-9]*&apos;    mode 666
add path &apos;pass[0-9]*&apos;    mode 666
add path &apos;xpt[0-9]*&apos;    mode 666
add path &apos;ugen[0-9]*&apos;    mode 666
add path &apos;usbctl&apos;        mode 666
add path &apos;usb/*&apos;        mode 666
add path &apos;lpt[0-9]*&apos;    mode 666
add path &apos;ulpt[0-9]*&apos;    mode 666
add path &apos;unlpt[0-9]*&apos;    mode 666
add path &apos;fd[0-9]*&apos;        mode 666
add path &apos;uscan[0-9]*&apos;    mode 666
add path &apos;video[0-9]*&apos;    mode 666
add path &apos;tuner[0-9]*&apos;  mode 666
add path &apos;dvb/*&apos;        mode 666
add path &apos;cx88*&apos; mode 0660
add path &apos;cx23885*&apos; mode 0660 # CX23885-family stream configuration device
add path &apos;iicdev*&apos; mode 0660
add path &apos;uvisor[0-9]*&apos; mode 0660
</code></pre><p>Enable our new ruleset. /etc/rc.conf</p>
<pre><code>devfs_system_ruleset=&quot;devfsrules_common&quot;
</code></pre><h3 id="Sound"><a href="#Sound" class="headerlink" title="Sound"></a>Sound</h3><p>Enable sound support at boot in loader.conf, and load it immediately with <code>kldload snd_driver</code>.  </p>
<pre><code>echo &apos;snd_driver_load=&quot;YES&quot;&apos; &gt;&gt; /boot/loader.conf
</code></pre><p>Then, <code>cat /dev/sndstat</code> to see your available devices. cat /dev/sndstat</p>
<pre><code>FreeBSD Audio Driver (newpcm: 64bit 2009061500/amd64)
Installed devices:
pcm0: &lt;HDA NVidia (Unknown) PCM #0 DisplayPort&gt; (play)
pcm1: &lt;HDA NVidia (Unknown) PCM #0 DisplayPort&gt; (play)
pcm2: &lt;HDA NVidia (Unknown) PCM #0 DisplayPort&gt; (play)
pcm3: &lt;HDA NVidia (Unknown) PCM #0 DisplayPort&gt; (play)
pcm4: &lt;HDA Realtek ALC892 PCM #0 Analog&gt; (play/rec)
pcm5: &lt;HDA Realtek ALC892 PCM #1 Analog&gt; (play/rec)
pcm6: &lt;HDA Realtek ALC892 PCM #2 Digital&gt; (play)
pcm7: &lt;HDA Realtek ALC892 PCM #3 Digital&gt; (play)
pcm8: &lt;USB audio&gt; (play) default
pcm9: &lt;USB audio&gt; (rec)
</code></pre><p>The <code>hw.snd.default_unit</code> sysctl variable controls the default audio output. I want to use the S/PDIF output of my onboard Realtek audio, <code>pcm6</code>, so I set <code>hw.snd.default_unit</code> to <code>6</code>. Enabling the <code>hw.snd.default_auto</code> boolean will automatically assign <code>hw.snd.default_unit</code> to newly-attached devices. /etc/sysctl.conf</p>
<pre><code># S/PDIF out on my MSI board
hw.snd.default_unit=6

# Don&apos;t automatically use new sound devices
hw.snd.default_auto=0
</code></pre><h2 id="Networking"><a href="#Networking" class="headerlink" title="Networking"></a>Networking</h2><p>If you didn’t enable networking during the install process now is a good time to do so. Here as an example is my computer, <code>emi</code>, a desktop with a wired network. I have a Realtek interface, <code>re0</code>. The name of your interface may vary based on the driver it uses. Most drivers are built into the <code>GENERIC</code> kernel, so your interface should be visible by running <code>ifconfig</code>. Common drivers you may see include <a href="http://www.freebsd.org/cgi/man.cgi?query=if_em&amp;ektion=&amp;manpath=" title="man if_em" target="_blank" rel="noopener">if_em</a> for Intel PRO interfaces, <a href="http://www.freebsd.org/cgi/man.cgi?query=if_re&amp;ektion=&amp;manpath=" title="man if_re" target="_blank" rel="noopener">if_re</a> for Realtek interfaces, and <a href="http://www.freebsd.org/cgi/man.cgi?query=if_en&amp;ektion=&amp;manpath=" title="man if_en" target="_blank" rel="noopener">if_en</a> for Midway interfaces. Read more about network configuration <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/config-network-setup.html" target="_blank" rel="noopener">in the Handbook</a> to learn about other possible configurations.</p>
<h3 id="Wired"><a href="#Wired" class="headerlink" title="Wired"></a>Wired</h3><p>You can use DHCP and SLAAC auto-discovery on most home networks: /etc/rc.conf</p>
<pre><code>hostname=&quot;emi.aloe.cooltrainer.org&quot;

# Enable DHCP for re0 and don&apos;t let dhclient block
background_dhclient=&quot;YES&quot;
ifconfig_re0=&quot;DHCP&quot;
ifconfig_re0_ipv6=&quot;inet6 accept_rtadv&quot;
</code></pre><p>You can bring up the interface and get a DHCP address immediately by issuing <code>ifconfig re0 up</code> and <code>dhclient re0</code>, again substituting the name of your own interface. Alternatively, you can supply static network addresses for your computer and default router: /etc/rc.conf</p>
<pre><code>hostname=&quot;emi.aloe.cooltrainer.org&quot;

ifconfig_re0=&quot;inet 172.16.0.40 netmask 255.240.0.0 broadcast 172.31.255.255&quot;
defaultrouter=&quot;172.16.0.1&quot;

ifconfig_re0_ipv6=&quot;inet6 2001:370:10f5:806::40 prefixlen 64&quot;
ipv6_defaultrouter=&quot;2001:370:10f5:806::1&quot;
</code></pre><h3 id="Wireless"><a href="#Wireless" class="headerlink" title="Wireless"></a>Wireless</h3><p>For WiFi configuration, see the <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/network-wireless.html" target="_blank" rel="noopener">wireless networking</a> section of the Handbook. I sometimes tether my desktop to my Android phone using a <a href="http://www.freebsd.org/cgi/man.cgi?query=run&amp;ektion=&amp;manpath=" title="man run" target="_blank" rel="noopener">run</a> B/G USB interface. It’s as simple as defining a new virtual <code>wlan</code> interface on <code>run0</code>, configuring <a href="http://www.freebsd.org/cgi/man.cgi?query=wpa_supplicant&amp;ektion=&amp;manpath=" title="man wpa_supplicant" target="_blank" rel="noopener">wpa_supplicant</a> for the WPA pre-shared key, and specifying the SSID and encryption standard (WPA). /etc/rc.conf</p>
<pre><code>wlans_run0=&quot;wlan0&quot;
ifconfig_wlan0=&quot;ssid Doubleshot WPA DHCP&quot;
</code></pre><p>/etc/wpa_supplicant.conf</p>
<pre><code>network={
    ssid=&quot;Doubleshot&quot;
    psk=&quot;pantsupantsu&quot;
}
</code></pre><h3 id="IPv6"><a href="#IPv6" class="headerlink" title="IPv6"></a>IPv6</h3><p>My configuration examples cover both IPv4 and IPv6 because I have a dual-stacked network. Depending on your network you may prefer to enable and prefer IPv6 like me, enable it but prefer IPv4, or not enable it at all. This can be done in rc.conf: /etc/rc.conf</p>
<pre><code>ipv6_activate_all_interfaces=&quot;YES&quot;
ip6addrctl_policy=&quot;ipv6_prefer&quot;
</code></pre><p>/etc/sysctl.conf</p>
<pre><code># Accept IPv6 router advertisements
net.inet6.ip6.accept_rtadv=1
</code></pre><h3 id="Firewall"><a href="#Firewall" class="headerlink" title="Firewall"></a>Firewall</h3><p>You should run a firewall. Windows, OS X, and many Linux distributions ship with a default firewall ruleset. FreeBSD does not, because there is no one-size-fits-all firewall configuration, but it does include one of the best software firewalls in the world, <a href="http://www.freebsd.org/doc/handbook/firewalls-pf.html" target="_blank" rel="noopener">PF</a>, courtesy of the OpenBSD project. Configuring a firewall can be a very complex topic. There are <a href="http://www.amazon.com/The-Book-PF-No-Nonsense-Firewall/dp/159327274X" target="_blank" rel="noopener">entire books</a> on the matter. Shown here is the ruleset from my computer. It has rules for a single network interface defined at the top of the file in the <code>ext_if</code> macro. Change it to the name of your computer’s interface as seen in <code>ifconfig</code>. The macros on the next few lines define the TCP and UDP ports on which this ruleset will allow incoming connections. My computer runs an SSH server on the default port, runs <a href="http://freshports.org/www/subsonic" title="www/subsonic" target="_blank" rel="noopener">www/subsonic</a> on port 443 (HTTPS), and has control ports for <a href="http://freshports.org/net/mosh" title="net/mosh" target="_blank" rel="noopener">net/mosh</a> in the 60000 range. You can open ports for additional services by defining them in those macros. The named services like <code>ssh</code> are defined in /etc/<a href="http://www.freebsd.org/cgi/man.cgi?query=services&amp;ektion=&amp;manpath=" title="man services" target="_blank" rel="noopener">services</a>. /etc/pf.conf</p>
<pre><code># The name of our network interface as seen in `ifconfig`
ext_if=&quot;re0&quot;

# Macros to define the set of TCP and UDP ports to open.
# Add additional ports or ranges separated by commas.
# UDP 60000-60010 is mosh control http://mosh.mit.edu/
tcp_services = &quot;{ssh, https}&quot;
udp_services = &quot;{60000:60010}&quot;

# If you block all ICMP requests you will break things like path MTU
# discovery. These macros define allowed ICMP types. The additional
# ICMPv6 types are for neighbor discovery (RFC 4861)
icmp_types = &quot;{echoreq, unreach}&quot;
icmp6_types=&quot;{echoreq, unreach, 133, 134, 135, 136, 137}&quot;

# Modulate the initial sequence number of TCP packets.
# Broken operating systems sometimes don&apos;t randomize this number,
# making it guessable.
tcp_state=&quot;flags S/SA keep state&quot;
udp_state=&quot;keep state&quot;

# Don&apos;t send rejections. Just drop.
set block-policy drop

# Exempt the loopback interface to prevent services utilizing the
# local loop from being blocked accidentally.
set skip on lo0

# all incoming traffic on external interface is normalized and fragmented
# packets are reassembled.
scrub in on $ext_if all fragment reassemble

# set a default deny policy.
block in log all

# This is a desktop so be permissive in allowing outgoing connections.
pass out quick modulate state

# Enable antispoofing on the external interface
antispoof for $ext_if inet
antispoof for $ext_if inet6

# block packets that fail a reverse path check. we look up the routing
# table, check to make sure that the outbound is the same as the source
# it came in on. if not, it is probably source address spoofed.
block in from urpf-failed to any

# drop broadcast requests quietly.
block in quick on $ext_if from any to 255.255.255.255

# Allow the services defined in the macros at the top of the file
pass in on $ext_if inet proto tcp from any to any port $tcp_services $tcp_state
pass in on $ext_if inet6 proto tcp from any to any port $tcp_services $tcp_state

pass in on $ext_if inet proto udp from any to any port $udp_services $udp_state
pass in on $ext_if inet6 proto udp from any to any port $udp_services $udp_state

# Allow ICMP
pass inet proto icmp all icmp-type $icmp_types keep state
pass inet6 proto icmp6 all icmp6-type $icmp6_types keep state
</code></pre><p>Enable the firewall in rc.conf and start it now.  </p>
<pre><code>echo &apos;pf_enable=&quot;YES&quot;&apos; &gt;&gt; /etc/rc.conf
service pf start
</code></pre><p>After making changes to your ruleset you can check them for validity and load the new rules with <a href="http://www.freebsd.org/cgi/man.cgi?query=pfctl&amp;ektion=&amp;manpath=" title="man pfctl" target="_blank" rel="noopener">pfctl</a>. It will abort if your ruleset contains an error unlike <code>service pf restart</code> which will stop, fail to start due to the error, and leave you locked out of SSH. Ask me how I know this will happen.  </p>
<pre><code>pfctl -f /etc/pf.conf
</code></pre><h2 id="Installing-Software"><a href="#Installing-Software" class="headerlink" title="Installing Software"></a>Installing Software</h2><p>FreeBSD is historically famous for its <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/ports-using.html#PORTS-SKELETON" target="_blank" rel="noopener">Ports Collection</a>, a directory skeleton of <code>Makefile</code>s and patches describing how to programmatically build packages of third-party software for your computer. Each port contains the metadata for that piece of software including the filename of the source archive, <a href="http://www.freebsd.org/cgi/man.cgi?query=sha256&amp;ektion=&amp;manpath=" title="man sha256" target="_blank" rel="noopener">sha256</a> hash of the files, what other software dependencies it requires, what compile-time options are available, what files it installs, and any patches necessary to work around non-portable code or fix issues that can’t be upstreamed to the projects themselves. Every port has a maintainer whose job it is to keep the port up to date and respond to issues if they arise with newer versions of the operating system. For example, check out <a href="http://www.freshports.org/search.php?stype=maintainer&amp;method=exact&amp;query=root@cooltrainer.org" target="_blank" rel="noopener">the ports I maintain</a>! When you <code>make</code> a port in the Ports Collection it downloads the upstream source archive, patches it, configures it, builds a customized binary package, and uses FreeBSD’s underlying binary package manager to install it. Third-party software installed through the package manager ends up in <code>/usr/local</code> where it mirrors the hierarchy of <code>/usr</code>. It might seem confusing to have them in two places, but it gives a fairly clean separation of the base system from the packages. For example, <code>/usr/local/bin</code> is where you will find <code>firefox</code> after installing <a href="http://freshports.org/www/firefox" title="www/firefox" target="_blank" rel="noopener">www/firefox</a>, but <code>/usr/bin</code> is where you will find <code>ee</code> or <code>sed</code>. As you have experienced, configuration for the operating system is done in <code>/etc</code>. Configuration files for your ports will usually be in <code>/usr/local/etc</code>. Check the <a href="http://www.freebsd.org/cgi/man.cgi?query=hier&amp;ektion=&amp;manpath=" title="man hier" target="_blank" rel="noopener">hier</a> manual for the full layout. As of FreeBSD 10 there is a new binary package manager, known as <code>pkgng</code> or just <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/pkgng-intro.html" target="_blank" rel="noopener">pkg</a>. It replaces the old suite of <code>pkg_</code> tools such as <code>pkg_add</code> and <code>pkg_delete</code> and contains many advanced features that have been missing from FreeBSD for years. Compared to the old package manager, pkgng supports safe upgrades (meaning it saves a copy of the previous-version package to roll back in case of failure), multiple repositories, package staging before install, a more modern binary package format, a more robust sqlite-based package registration database, and most importantly remote binary package upgrades. Thanks to pkgng it is now possible to add multiple remote binary package repositories and get updates from them without relying on building Ports at all. The FreeBSD project provide binary packages built from the Ports tree using the default options. For example, installing a binary package of Firefox with <code>pkg install firefox</code> or <code>pkg install www/firefox</code> is equivalent to doing <code>portsnap fetch extract &amp;&amp; cd /usr/local/www/firefox &amp;&amp; make install</code>. I will stick to the convention of <code>pkg install</code> on this page but the names will be identical if you prefer to build customized packages from Ports. It is possible to mix and match binary packages with your own custom packages built from Ports using pkg’s <code>lock</code> and <code>unlock</code>, but that gets more advanced and more annoying than is appropriate for this guide. I build my ports on one of my computers using <a href="https://fossil.etoilebsd.net/poudriere/doc/trunk/doc/index.wiki" target="_blank" rel="noopener">poudriere</a> then use that computer as a binary package repository for the other FreeBSD computers on my network. A new user with just one computer should stick to <code>pkg install</code> from the default package server until they are more familiar with the OS. In the past I recommended building Ports over the default binary package server due to some strange default port options and the lack of package coverage for certain software like KDE. These days however I recommend using binary packages by default unless you find a particular port option you absolutely must have. Even then, consider using poudriere to create a local package server instead of building and installing ports the traditional way. It’s more work initially to set up but saves you from the hassle of updating shared libraries while trying to use your computer. The old fashioned way will replace <code>libfoo.so.4</code> with <code>libfoo.so.5</code> and only then start rebuilding ports that depend on it. Meanwhile your currently-installed software will be unusable due to the missing <code>libfoo.so.4</code>. Packages avoid this issue and alert you upfront to any build failures. Probably 99% of users these days will be fine with the packages provided by the FreeBSD project. No matter the route you choose, you should begin by updating your pkg repository or your Ports tree. <code>pkg update</code> will fetch an updated index from every <code>PACKAGESITE</code> defined in that environment variable or in <code>pkg.conf</code>. For Ports, <code>portsnap fetch extract</code> will retrieve a new full ports tree. You should read <a href="http://www.freebsd.org/cgi/man.cgi?query=pkg&amp;ektion=&amp;manpath=" title="man pkg" target="_blank" rel="noopener">pkg</a> for the list of commands supported by <code>pkg</code> and read <a href="http://www.freebsd.org/cgi/man.cgi?query=ports&amp;ektion=&amp;manpath=" title="man ports" target="_blank" rel="noopener">ports</a> for the list of available <code>make</code> targets in Ports, but in general you will use <code>pkg install &lt;portname&gt;</code> (or <code>pkg install &lt;category&gt;/&lt;portname&gt;</code>) or <code>cd /usr/ports/&lt;category&gt;/&lt;portname&gt; &amp;&amp; make install</code> to install software. If you choose to build your own packages from Ports it will be because you want to customize options, so use <code>make config-recursive</code> in any port’s directory to set these port options in advance so they don’t continually interrupt the build. Read over the options as they are presented, but generally don’t toggle an option if you don’t know what it does. The defaults are default for a reason! Once you’ve chosen all the options, run <code>make config-recursive</code> again, since it’s likely for a dependency enabled the first time to have options of its own. When no further port options are displayed run <code>make install</code> to compile and install your custom package. The first things I usually install on a new system are <a href="http://freshports.org/sysutils/tmux" title="sysutils/tmux" target="_blank" rel="noopener">sysutils/tmux</a> and <a href="http://freshports.org/shells/zsh" title="shells/zsh" target="_blank" rel="noopener">shells/zsh</a> because I prefer it to the venerable default <a href="http://www.freebsd.org/cgi/man.cgi?query=tcsh&amp;ektion=&amp;manpath=" title="man tcsh" target="_blank" rel="noopener">tcsh</a>. You might be more comfortable with <a href="http://freshports.org/shells/bash" title="shells/bash" target="_blank" rel="noopener">shells/bash</a>. Once installed, changing your user’s default shell is as simple as <code>chsh -s /usr/local/bin/zsh</code>.</p>
<h3 id="Build-Settings"><a href="#Build-Settings" class="headerlink" title="Build Settings"></a>Build Settings</h3><p>Some third-party software options can only be set at compile time. Here are a few you should consider for desktop use if you decide to build your own customized packages. The <a href="https://qt-project.org/" target="_blank" rel="noopener">Qt</a> toolkit has some options that can be set via any combination of the following knobs. If you change the <code>QT4_OPTIONS</code> after Qt is installed you will need to rebuild <a href="http://freshports.org/devel/qt4-corelib" title="devel/qt4-corelib" target="_blank" rel="noopener">devel/qt4-corelib</a> and <a href="http://freshports.org/x11-toolkits/qt4-gui" title="x11-toolkits/qt4-gui" target="_blank" rel="noopener">x11-toolkits/qt4-gui</a>.</p>
<ul>
<li><a href="http://blog.qt.digia.com/blog/2008/05/13/introducing-qgtkstyle/" target="_blank" rel="noopener">QGtkStyle</a> is a selectable theme engine that lets Qt applications integrate more closely with <a href="http://www.gtk.org/" target="_blank" rel="noopener">GTK+</a> environments and can be enabled with the <code>QGTKSTYLE</code> Qt4 option. You should enable this option if you plan to use a GTK+-based desktop environment like MATE or XFCE. Once built you can select the GTK+ visual style in <code>qt4-qtconfig</code>.</li>
<li>CUPS is the standard printing engine on Free Unix-like systems. Support for it in Qt can be enabled with the <code>CUPS</code> Qt4 option.</li>
<li><a href="http://www.radscan.com/nas.html" target="_blank" rel="noopener">Network Audio System</a> is a network transparent client/server audio transport system and can be enabled in Qt applications by setting the <code>NAS</code> Qt4 option.</li>
</ul>
<pre><code>echo &quot;QT4_OPTIONS=    CUPS QGTKSTYLE NAS&quot; &gt;&gt; /etc/make.conf
</code></pre><h3 id="Staying-Up-To-Date"><a href="#Staying-Up-To-Date" class="headerlink" title="Staying Up To Date"></a>Staying Up To Date</h3><p>Before updating your Ports tree or pkg catalogue on an already-installed computer I suggest checking out <a href="http://svnweb.freebsd.org/ports/head/UPDATING?view=markup" target="_blank" rel="noopener">UPDATING</a>. This file – also found at <code>/usr/ports/UPDATING</code> if you have an extracted Ports tree – tracks breaking changes in packages and the steps necessary to to fix them. It will tell you when configuration file syntax has changed, how to fix dependencies when ports split or merge, when default versions of packages change, and more. You can update your already-extracted Ports tree to the newest revision with <code>portsnap fetch update</code>. There are two common tools for programmatically upgrading your ports, <a href="http://freshports.org/ports-mgmt/portupgrade" title="ports-mgmt/portupgrade" target="_blank" rel="noopener">ports-mgmt/portupgrade</a> and <a href="http://freshports.org/ports-mgmt/portmaster" title="ports-mgmt/portmaster" target="_blank" rel="noopener">ports-mgmt/portmaster</a>. I prefer portupgrade because portmaster stubbornly aborts the entire upgrade on any error, but you might like it. The common portmaster usage is <code>portmaster -a</code> to upgrade installed ports. I usually update with <code>portupgrade -rac</code>, with <code>-r`</code>-a<code>to recursively update all installed ports and</code>-c<code>to preemptively show new port options so they won’t interrupt the build. If you are using binary packages you can update the package repository catalog with</code>pkg update<code>and upgrade your installed packages with</code>pkg upgrade`. The Handbook has a more detailed chapter on <a href="http://www.freebsd.org/doc/handbook/ports-using.html" target="_blank" rel="noopener">using Ports</a> that includes upgrading and other tasks.</p>
<h2 id="Going-Graphical"><a href="#Going-Graphical" class="headerlink" title="Going Graphical"></a>Going Graphical</h2><p>I’m sure you’re eager to get out of the text-only console. To do so you need to install the <a href="http://www.x.org/wiki/" target="_blank" rel="noopener">X.org</a> distribution of the <a href="http://magcius.github.io/xplain/article/index.html" target="_blank" rel="noopener">X Window System</a> from <a href="http://freshports.org/x11/xorg" title="x11/xorg" target="_blank" rel="noopener">x11/xorg</a> with <code>pkg install xorg</code>. X.org by default uses FreeBSD’s <a href="http://www.freebsd.org/cgi/man.cgi?query=devd&amp;ektion=&amp;manpath=" title="man devd" target="_blank" rel="noopener">devd</a> for hardware detection and <a href="http://www.freedesktop.org/wiki/Software/dbus/" target="_blank" rel="noopener">D-Bus</a> for interprocess communication. <a href="http://www.freedesktop.org/wiki/Software/hal/" target="_blank" rel="noopener">HAL</a> used to be the default hardware detection mechanism but is in the process of deprecation, so you may not need it unless you plan to use a desktop environment that still depends on it. Check the dependencies for <a href="http://freshports.org/sysutils/hal" title="sysutils/hal" target="_blank" rel="noopener">sysutils/hal</a> for a list of software still requiring it. /etc/rc.conf</p>
<pre><code>hald_enable=&quot;YES&quot;
dbus_enable=&quot;YES&quot;
</code></pre><p>X.org on its own is just the display server. It needs stuff to display. You can install applications, but you also need a window manager to handle displaying and interacting with those applications in the way you’d expect from any modern OS. By default X comes with the <a href="https://en.wikipedia.org/wiki/Twm" target="_blank" rel="noopener">Tab Window Manager</a> which is probably not software you would enjoy using in the 21st century.</p>
<h3 id="Install-fonts"><a href="#Install-fonts" class="headerlink" title="Install fonts"></a>Install fonts</h3><p>X.org doesn’t include many attractive typefaces by default. Luckily, there are plenty <a href="http://freshports.org/x11-fonts/" title="available in Ports" target="_blank" rel="noopener">available in Ports</a>. Here are a few I use, including many from non-Roman languages for better Unicode coverage. On a new system I usually install something like:  </p>
<pre><code>pkg install chinese/arphicttf chinese/font-std hebrew/culmus hebrew/elmar-fonts japanese/font-ipa japanese/font-ipa-uigothic japanese/font-ipaex japanese/font-kochi japanese/font-migmix japanese/font-migu japanese/font-mona-ipa japanese/font-motoya-al japanese/font-mplus-ipa japanese/font-sazanami japanese/font-shinonome japanese/font-takao japanese/font-ume japanese/font-vlgothic x11-fonts/hanazono-fonts-ttf japanese/font-mikachan korean/aleefonts-ttf korean/nanumfonts-ttf korean/unfonts-core x11-fonts/anonymous-pro x11-fonts/artwiz-aleczapka x11-fonts/dejavu x11-fonts/inconsolata-ttf x11-fonts/terminus-font x11-fonts/cantarell-fonts x11-fonts/droid-fonts-ttf x11-fonts/doulos x11-fonts/ubuntu-font x11-fonts/isabella x11-fonts/ecofont x11-fonts/junicode x11-fonts/khmeros x11-fonts/padauk x11-fonts/stix-fonts x11-fonts/charis x11-fonts/urwfonts-ttf russian/koi8r-ps x11-fonts/geminifonts x11-fonts/cyr-rfx x11-fonts/paratype x11-fonts/gentium-plus
</code></pre><p>This includes:</p>
<ul>
<li><a href="http://freshports.org/chinese/arphicttf" title="Arphicttf" target="_blank" rel="noopener">Arphicttf</a> and <a href="http://freshports.org/chinese/font-std" title="font-std" target="_blank" rel="noopener">font-std</a> for Chinese coverage.</li>
<li><a href="http://freshports.org/hebrew/culmus" title="Culmus" target="_blank" rel="noopener">Culmus</a> and <a href="http://freshports.org/hebrew/elmar-fonts" title="El-Mar" target="_blank" rel="noopener">El-Mar</a> for Hebrew language coverage.</li>
<li><a href="http://freshports.org/japanese/font-ipa" title="IPA" target="_blank" rel="noopener">IPA</a>, <a href="http://freshports.org/japanese/font-ipa-uigothic" title="IPA UIGothic" target="_blank" rel="noopener">IPA UIGothic</a>, <a href="http://freshports.org/japanese/font-ipaex" title="IPAex" target="_blank" rel="noopener">IPAex</a>, <a href="http://freshports.org/japanese/font-kochi" title="Kochi" target="_blank" rel="noopener">Kochi</a>, <a href="http://freshports.org/japanese/font-migmix" title="MigMix" target="_blank" rel="noopener">MigMix</a>, <a href="http://freshports.org/japanese/font-migu" title="Migu" target="_blank" rel="noopener">Migu</a>, <a href="http://freshports.org/japanese/font-mona-ipa" title="Mona" target="_blank" rel="noopener">Mona</a>, <a href="http://freshports.org/japanese/font-motoya-al" title="MOTOYA" target="_blank" rel="noopener">MOTOYA</a>, <a href="http://freshports.org/japanese/font-mplus-ipa" title="M+" target="_blank" rel="noopener">M+</a>, <a href="http://freshports.org/japanese/font-sazanami" title="Sazanami" target="_blank" rel="noopener">Sazanami</a>, <a href="http://freshports.org/japanese/font-shinonome" title="Shinonome" target="_blank" rel="noopener">Shinonome</a>, <a href="http://freshports.org/japanese/font-takao" title="Takao" target="_blank" rel="noopener">Takao</a>, <a href="http://freshports.org/japanese/font-ume" title="UmeFont" target="_blank" rel="noopener">UmeFont</a>, <a href="http://freshports.org/japanese/font-vlgothic" title="VLGothic" target="_blank" rel="noopener">VLGothic</a>, <a href="http://freshports.org/x11-fonts/hanazono-fonts-ttf" title="Hanazono Mincho" target="_blank" rel="noopener">Hanazono Mincho</a>, and <a href="http://freshports.org/japanese/mikachan-ttfonts" title="Mika-chan" target="_blank" rel="noopener">Mika-chan</a> for Japanese language coverage.</li>
<li><a href="http://freshports.org/korean/aleefonts-ttf" title="A-Lee fonts" target="_blank" rel="noopener">A-Lee fonts</a>, <a href="http://freshports.org/korean/nanumfonts-ttf" title="Nanum" target="_blank" rel="noopener">Nanum</a>, and <a href="http://freshports.org/korean/unfonts-core" title="Un fonts" target="_blank" rel="noopener">Un fonts</a> for Korean language coverage.</li>
<li><a href="http://freshports.org/x11-fonts/anonymous-pro" title="Anonymous Pro" target="_blank" rel="noopener">Anonymous Pro</a>, <a href="http://freshports.org/x11-fonts/artwiz-aleczapka" title="artwiz-aleczapka" target="_blank" rel="noopener">artwiz-aleczapka</a>, <a href="http://freshports.org/x11-fonts/dejavu" title="DejaVu" target="_blank" rel="noopener">DejaVu</a>, <a href="http://freshports.org/x11-fonts/inconsolata-ttf" title="Inconsolata" target="_blank" rel="noopener">Inconsolata</a>, and <a href="http://freshports.org/x11-fonts/terminus-font" title="Terminus" target="_blank" rel="noopener">Terminus</a> for terminals and editors.</li>
<li><a href="http://freshports.org/x11-fonts/cantarell-fonts" title="Cantarell" target="_blank" rel="noopener">Cantarell</a>, <a href="http://freshports.org/x11-fonts/droid-fonts-ttf" title="Droid" target="_blank" rel="noopener">Droid</a>, <a href="http://freshports.org/x11-fonts/doulos" title="Doulos SIL" target="_blank" rel="noopener">Doulos SIL</a>, and <a href="http://freshports.org/x11-fonts/ubuntu-font" title="Ubuntu" target="_blank" rel="noopener">Ubuntu</a> for general Roman alphabet language coverage.</li>
<li><a href="http://freshports.org/x11-fonts/fonts-te" title="Telugu" target="_blank" rel="noopener">Telugu</a> for Telugu language.</li>
<li><a href="http://freshports.org/x11-fonts/isabella" title="Isabella" target="_blank" rel="noopener">Isabella</a>, <a href="http://freshports.org/x11-fonts/ecofont" title="Ecofont" target="_blank" rel="noopener">Ecofont</a>, and <a href="http://freshports.org/x11-fonts/junicode" title="Junicode" target="_blank" rel="noopener">Junicode</a> as novelty typefaces.</li>
<li><a href="http://freshports.org/x11-fonts/khmeros" title="KhmerOS" target="_blank" rel="noopener">KhmerOS</a> for Khmer language coverage.</li>
<li><a href="http://freshports.org/x11-fonts/padauk" title="Padauk" target="_blank" rel="noopener">Padauk</a> for Myanmar language coverage.</li>
<li><a href="http://freshports.org/x11-fonts/stix-fonts" title="STIX" target="_blank" rel="noopener">STIX</a> and <a href="http://freshports.org/print/cm-super" title="Computer Modern" target="_blank" rel="noopener">Computer Modern</a> for technical and mathematic symbols.</li>
<li><a href="http://freshports.org/x11-fonts/charis" title="Charis" target="_blank" rel="noopener">Charis</a>, <a href="http://freshports.org/x11-fonts/urwfonts-ttf" title="URW" target="_blank" rel="noopener">URW</a>, <a href="http://freshports.org/russian/koi8r-ps" title="KOI8" target="_blank" rel="noopener">KOI8</a>, <a href="http://freshports.org/x11-fonts/geminifonts" title="Geminifonts" target="_blank" rel="noopener">Geminifonts</a>, <a href="http://freshports.org/x11-fonts/cyr-rfx" title="CYR-RFX" target="_blank" rel="noopener">CYR-RFX</a>, and <a href="http://freshports.org/x11-fonts/paratype" title="ParaType" target="_blank" rel="noopener">ParaType</a> for Cyrillic and Eastern European language coverage.</li>
</ul>
<p><a href="http://freshports.org/x11-fonts/webfonts" title="x11-fonts/webfonts" target="_blank" rel="noopener">x11-fonts/webfonts</a> is a special case. It includes the <a href="https://www.microsoft.com/typography/fonts/web.aspx" target="_blank" rel="noopener">Microsoft Core Fonts for the Web</a> such as Andale and Verdana. If you own a valid Microsoft Windows license you can get Tahoma as well by adding to <code>/etc/make.conf</code> and building a custom package. /etc/make.conf</p>
<pre><code># Enable Tahoma in x11-fonts/webfonts if you have a Windows license
# You show me yours and I&apos;ll show you mine ;)
.if ${.CURDIR:M*/x11-fonts/webfonts}
WITH_MSWINDOWS_LICENSE=yes
.endif
</code></pre><p>Now that those fonts are installed you need to tell Xorg about them using a <code>FontPath</code> in your <code>/etc/X11/xorg.conf</code> so they can be used. Unfortunately the font paths in Ports are not entirely standardized. Most of them end up in <code>/usr/local/lib/X11/fonts</code>, some end up in <code>/usr/local/share/fonts/</code>, and some in just <code>/usr/local/share/</code>. Here’s the relevant section from my <code>xorg.conf</code>. Yours should look similar. In the past it was necessary to tell X about your installed fonts using <code>FontPath</code> directives in <code>xorg.conf</code>, but these days most software will detect them automatically using <a href="https://www.freedesktop.org/wiki/Software/fontconfig/" target="_blank" rel="noopener">fontconfig</a>. You probably won’t run into a case where you will need to, but you can manually inform the X server of fonts like this:  </p>
<pre><code>Section &quot;Files&quot;
    FontPath        &quot;/usr/local/lib/X11/fonts/Liberation/&quot;
    FontPath        &quot;/usr/local/lib/X11/fonts/anonymous-pro/&quot;
    FontPath        &quot;/usr/local/share/font-mona-ipa/&quot;
EndSection
</code></pre><p>You can install other invididual fonts later for a single user by copying them inside the <code>~/.fonts</code> directory under your <a href="https://en.wikipedia.org/wiki/Home_directory" target="_blank" rel="noopener">home directory</a>. You can re-scan the configured <code>FontPath</code>s and automatically-detected fonts by running <code>fc-cache -vf</code> and can list all installed fonts with <code>fc-list</code> to check that they all appear. For example, I have a fairly large local font repository in my <code>~/.fonts/</code> directory and have 2313 fonts available on my system as of this writing according to <code>fc-list | wc -l</code>.</p>
<h3 id="Starting-X"><a href="#Starting-X" class="headerlink" title="Starting X"></a>Starting X</h3><p>The shell script <code>.xinitrc</code> in your home directory is the script that is executed for the lifecycle of your X session. <code>.xinitrc</code> is used to run startup applications and then run your window manager. When you finally end your X session your window manager will exit, <code>.xinitrc</code> will return, and the X server will stop. Here’s a simple example <code>.xinitrc</code>: ~/.xinitrc</p>
<pre><code>xscreensaver -no-splash &amp;
xdg-user-dirs-update &amp;
redshift &amp;
compton &amp;
exec wmaker
</code></pre><p>In my example <code>.xinitrc</code> I use <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#window-maker" target="_blank" rel="noopener">Window Maker</a> and start <a href="http://freshports.org/x11/xscreensaver" title="x11/xscreensaver" target="_blank" rel="noopener">x11/xscreensaver</a>, <a href="http://freedesktop.org/wiki/Software/xdg-user-dirs/" target="_blank" rel="noopener">xdg-user-dirs</a>, <a href="http://freshports.org/accessibility/redshift" title="accessibility/redshift" target="_blank" rel="noopener">accessibility/redshift</a>, and the lightweight compositor <a href="http://freshports.org/x11-wm/compton" title="x11-wm/compton" target="_blank" rel="noopener">x11-wm/compton</a>. Starting your graphical session after logging in on a TTY (the command-line login prompt) is the traditional way and is as easy as running the command <code>startx</code> after loggin in as your user. Don’t run X as root. I prefer to use a graphical login manager. Some desktop environments include their own, like KDE’s KDM. On my computer I use the environment-agnostic <a href="http://freshports.org/x11/slim" title="x11/slim" target="_blank" rel="noopener">x11/slim</a>. A graphical login manager, besides being nicer to look at, also protects you from leaving a logged-in user session (or even worse, a root session!) on a TTY that could be used by someone walking up to your computer. You can configure the login manager to start at boot by adding either <code>kdm_enable=&quot;YES&quot;</code> or <code>slim_enable=&quot;YES&quot;</code> to <code>/etc/rc.conf</code>, but I would recommend not doing that until you are confident everything is set up correctly. It will be more difficult to fix a config file if your computer automatically starts to a broken X server. Test a plain old <code>startx</code> first, then test your login manager with <code>service slim onestart</code> or <code>service kdm onestart</code> before enabling them for every boot. You can configure the <code>sessiondir</code> directive in the SLiM configuration file to define the path to <a href="http://standards.freedesktop.org/desktop-entry-spec/latest/" target="_blank" rel="noopener">desktop entries</a> installed by your ports, usually <code>/usr/local/share/xsessions</code>. Use <code>exec $1</code> instead of a particular window manager’s executable name in your <code>.xinitrc</code> to run the command from SLiM passed in as an argument. /usr/local/etc/slim.conf</p>
<pre><code>sessiondir /usr/local/share/xsessions/




echo &apos;slim_enable=&quot;YES&quot;&apos; &gt;&gt; /etc/rc.conf
service slim start
</code></pre><p>~/.xinitrc</p>
<pre><code>exec $1
</code></pre><p>  <img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/762cec3ace25c26b301473518baf1734.png" alt="">   You can switch session (window manager) with the _F1_ key on the SLiM login screen. The X session will use one of the virtual <a href="http://www.freebsd.org/cgi/man.cgi?query=ttys&amp;ektion=&amp;manpath=" title="man ttys" target="_blank" rel="noopener">ttys</a>. Once started, you can switch to a different virtual TTY with <em>CTRL-ATL-F#</em>. You can switch back to the graphical TTY with <em>CTRL-ATL-F9</em>. You may need to create a desktop entry for your window manager of choice if the port maintainer doesn’t ship one. Here’s an example, again for <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#windowmaker" target="_blank" rel="noopener">Window Maker</a>. /usr/local/share/xsessions/wmaker.desktop </p>
<pre><code>[Desktop Entry]
Encoding=UTF-8
Name=Window Maker
Exec=/usr/local/bin/wmaker
Comment=This session logs you into Window Maker
Type=Application
</code></pre><h3 id="Automatic-configuration"><a href="#Automatic-configuration" class="headerlink" title="Automatic configuration"></a>Automatic configuration</h3><p>Versions of X.org since 1.2 (X11R7.2) in 2007 have supported autoconfiguration of display devices. HAL automatically detects input devices, and fontconfig automatically detects fonts, so you may never need <code>/etc/X11/xorg.conf</code> at all! Once you’ve set up your <code>.xinitrc</code> to use your window manager of choice, just give <code>startx</code> a try. Hopefully it will work flawlessly. If it does feel free to skip the sections on manual configuration. That should only be necessary if you need to force a specific video driver, toggle a specific option, or just <a href="http://web.mit.edu/~simsong/www/ugh.pdf#page=161" target="_blank" rel="noopener">hate yourself</a> and feel like learning one of the worst configuration file formats of all time.</p>
<h3 id="Manual-configuration"><a href="#Manual-configuration" class="headerlink" title="Manual configuration"></a>Manual configuration</h3><p>This section explains how you can manually configure X for systems using an AMD Radeon and the <a href="http://www.x.org/archive/X11R7.7/doc/man/man4/radeon.4.xhtml" target="_blank" rel="noopener"><code>radeon</code></a> driver, an Intel grahpics chip with the <a href="http://www.x.org/archive/X11R7.7/doc/man/man4/intel.4.xhtml" target="_blank" rel="noopener"><code>intel</code></a> driver, virtualized graphics cards like <a href="http://freshports.org/emulators/virtualbox-ose-additions" title="emulators/virtualbox-ose-additions" target="_blank" rel="noopener">emulators/virtualbox-ose-additions</a>’s <code>vboxvideo</code>, or any other generic framebuffer device supported by the default <a href="http://www.x.org/archive/X11R7.7/doc/man/man4/vesa.4.xhtml" target="_blank" rel="noopener"><code>vesa</code></a> driver. If autodetection works you shouldn’t have to do this. As root, run <code>X -configure</code>. It will spit out a new <a href="http://www.x.org/releases/X11R7.7/doc/man/man5/xorg.conf.5.xhtml" target="_blank" rel="noopener">X.org configuration file</a> in <code>/root/xorg.conf.new</code> based on your detected hardware. Copy this file to <code>/etc/X11/xorg.conf</code>, then pull it up in a text editor for a few modifications. Add an “Extensions” section and enable the <a href="http://www.x.org/releases/X11R7.7/doc/compositeproto/compositeproto.txt" target="_blank" rel="noopener">Composite</a> extension.  </p>
<pre><code>Section &quot;Extensions&quot;
    Option    &quot;Composite&quot; &quot;Enable&quot;
EndSection
</code></pre><p>Add one line to the <code>ServerLayout</code> section to enable <a href="http://fedoraproject.org/wiki/RenderingProject/aiglx" target="_blank" rel="noopener">AIGLX</a>.  </p>
<pre><code>Section &quot;ServerLayout&quot;
    Identifier     &quot;X.org Configured&quot;
    Screen      0  &quot;Screen0&quot; 0 0
    InputDevice    &quot;Mouse0&quot; &quot;CorePointer&quot;
    InputDevice    &quot;Keyboard0&quot; &quot;CoreKeyboard&quot;
    Option         &quot;AIGLX&quot; &quot;true&quot;
EndSection
</code></pre><p>I usually enable the <a href="http://www.cworth.org/tag/exa/" target="_blank" rel="noopener">EXA</a> <code>AccelMethod</code> and <code>DRI</code> by adding their respective lines to the <code>Device</code> section. If you have a Radeon card ensure your <code>Driver</code> is configured as <code>radeon</code>, not <code>radeonhd</code>! <a href="http://www.x.org/wiki/radeonhd" target="_blank" rel="noopener">radeonhd</a> is an older, Novell-sponsored, <a href="http://www.phoronix.com/scan.php?page=news_item&amp;px=ODIwOQ" target="_blank" rel="noopener">defunct</a> driver for Radeon HD hardware, but <code>-configure</code> likes to pick it by default if it’s installed. You should use <code>radeon</code> instead. Otherwise <code>X -configure</code> should pick the best driver.  </p>
<pre><code>Section &quot;Device&quot;
    Option     &quot;AccelMethod&quot; &quot;EXA&quot;
    Option     &quot;DRI&quot; &quot;true&quot;
    Identifier  &quot;Card0&quot;
    Driver      &quot;radeon&quot;
    VendorName  &quot;Advanced Micro Devices [AMD] nee ATI&quot;
    BoardName   &quot;RV770 [Radeon HD 4850]&quot;
    BusID       &quot;PCI:1:0:0&quot;
EndSection
</code></pre><p>Enable the <code>freetype</code>, <code>bitmap</code>, and <code>type1</code> X font modules by adding them to the <code>Module</code> section. According to the manual, “[t]he <code>extmod</code>, <code>dbe</code>, <code>dri</code>, <code>dri2</code>, <code>glx</code>, and <code>record</code> extension modules are loaded automatically if they are present”, but I like to go for the explicit configuration and define them anyway.  </p>
<pre><code>Section &quot;Module&quot;
    Load           &quot;dbe&quot;
    Load           &quot;dri&quot;
    Load           &quot;dri2&quot;
    Load           &quot;extmod&quot;
    Load           &quot;record&quot;
    Load           &quot;freetype&quot;
    Load           &quot;bitmap&quot;
    Load           &quot;type1&quot;
    Load           &quot;glx&quot;
EndSection
</code></pre><h3 id="Manual-Configuration-with-NVIDIA"><a href="#Manual-Configuration-with-NVIDIA" class="headerlink" title="Manual Configuration with NVIDIA"></a>Manual Configuration with NVIDIA</h3><p>Skip this section if you don’t use an NVIDIA graphics card or if automatic configuration works for you. The binary <a href="http://freshports.org/x11/nvidia-driver" title="x11/nvidia-driver" target="_blank" rel="noopener">x11/nvidia-driver</a> is the only proprietary software on my system. As much as I’d prefer a free and open solution, I’ve found that neither Nouveau nor the free Radeon or Intel driver compare to the speed and feature support of Nvidia’s official driver. Install the driver itself, <a href="http://freshports.org/x11/nvidia-settings" title="x11/nvidia-settings" target="_blank" rel="noopener">x11/nvidia-settings</a>, and <a href="http://freshports.org/x11/nvidia-xconfig" title="x11/nvidia-xconfig" target="_blank" rel="noopener">x11/nvidia-xconfig</a>. To load the nvidia kernel module at boot, enable it in <code>/boot/loader.conf</code>.  </p>
<pre><code>echo &apos;nvidia-modeset_load=&quot;YES&quot;&apos; &gt;&gt; /boot/loader.conf
</code></pre><p>Run <code>nvidia-xconfig</code> to get a base <a href="http://www.x.org/releases/X11R7.6/doc/man/man5/xorg.conf.5.xhtml" target="_blank" rel="noopener">xorg.conf</a> in <code>/etc/X11/xorg.conf</code>. Pull it up in your favourite text editor and add the <code>Module</code> section to enable the <code>freetype2</code>, <code>glx</code>, <code>type1</code> extensions. /etc/X11/xorg.conf</p>
<pre><code>Section &quot;Module&quot;
    Load           &quot;freetype&quot;
    Load           &quot;bitmap&quot;
    Load           &quot;type1&quot;
    Load           &quot;glx&quot;
EndSection
</code></pre><p>Later on, once you’re booted into the graphical environment, you can use <code>nvidia-settings</code> to configure TwinView and any other settings.</p>
<h2 id="Desktop-Environments"><a href="#Desktop-Environments" class="headerlink" title="Desktop Environments"></a>Desktop Environments</h2><p>The best part of the X Window System ecosystem is the variety of environments available. You might prefer the configurability of KDE, the sparse cleanliness of MATE, something minimal like Window Maker, or even tiling like i3. This isn’t <a href="http://xwinman.org/" target="_blank" rel="noopener">xwinman</a>, but I’ve included screenshots and descriptions for some of the most popular environments to give you an idea what’s out there.</p>
<h3 id="KDE-4"><a href="#KDE-4" class="headerlink" title="KDE 4"></a>KDE 4</h3><p><a href="http://kde.org/" target="_blank" rel="noopener">KDE</a> is the largest and most fully-featured Free Software desktop environment, based on the Qt toolkit. Its configuration options are dizzyingly numerous and it has excellent support for modern technologies like high-DPI displays. It has a modern compositing window manager, KWin, the web and file browser Konqueror that famously spawned the KHTML engine that became WebKit, and a family of other Qt applications like the excellent <a href="http://www.clementine-player.org/" target="_blank" rel="noopener">Clementine</a>. The KDE4 meta-port is available at <a href="http://freshports.org/x11/kde4" title="x11/kde4" target="_blank" rel="noopener">x11/kde4</a>.   <img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/e15a53d46c4d6acbc0cc1469a29f1a4e.png" alt="">   You can start KDE with <code>exec startkde</code> in your <code>.xinitrc</code>, but KDE also includes its own graphical <a href="https://cooltrainer.org/images/original/Alice-KDM.png" target="_blank" rel="noopener">login manager</a>, <a href="http://docs.kde.org/stable/en/kde-workspace/kdm/index.html" target="_blank" rel="noopener">KDM</a> which you can optionally enable in <code>rc.conf</code> and start as a service.  </p>
<pre><code>echo &apos;kdm4_enable=&quot;YES&quot;&apos; &gt;&gt; /etc/rc.conf
service kdm4 start
</code></pre><h3 id="MATE-nee-GNOME-2"><a href="#MATE-nee-GNOME-2" class="headerlink" title="MATE née GNOME 2"></a>MATE née GNOME 2</h3><p>GNOME 2 was a venerable desktop environment made famous as the Ubuntu default around 2008, and MATE is the community fork of GNOME 2 after the GNOME team lost their collective minds.   <img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/a7ba2a4060cc5fca0bda367f33e4fd05.png" alt="">   MATE users should configure <a href="http://www.freedesktop.org/wiki/Software/polkit" target="_blank" rel="noopener">PolicyKit</a> to allow normal users to mount removable media automatically. /usr/local/etc/PolicyKit/PolicyKit.conf </p>
<pre><code>&lt;config version=&quot;0.1&quot;&gt;
    &lt;match action=&quot;org.freedesktop.hal.storage.mount-removable&quot;&gt;
        &lt;return result=&quot;yes&quot;/&gt;
    &lt;/match&gt;
    &lt;match action=&quot;org.freedesktop.hal.storage.mount-fixed&quot;&gt;
        &lt;return result=&quot;yes&quot;/&gt;
    &lt;/match&gt;
    &lt;match user=&quot;root&quot;&gt;
        &lt;return result=&quot;yes&quot;/&gt;
    &lt;/match&gt;
    &lt;define_admin_auth group=&quot;wheel&quot;/&gt;
&lt;/config&gt;
</code></pre><p>MATE doesn’t include a GDM alternative, so start it with <code>exec mate-session</code> in your <code>.xinitrc</code> using either <code>startx</code> or SLiM. Compiz is a popular alternative window manager with MATE and GNOME 2 users. It gives you those fancy wobbly windows, 3d cubes, and all kinds of flashy stuff. You can install Compiz-Fusion from <a href="http://freshports.org/x11-wm/compiz-fusion" title="x11-wm/compiz-fusion" target="_blank" rel="noopener">x11-wm/compiz-fusion</a>. Be sure to disable the obsolete and unmaintained window decorator <a href="http://wiki.compiz.org/Decorators/Emerald" target="_blank" rel="noopener">Emerald</a>, a leftover from the Beryl project, when prompted on the port configuration screen. With Emerald disabled, compiz will default to <code>gtk-window-decorator</code> and will take on your normal GTK theme appearance but with more transparency and garish animation.   <img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/9a4edd933416689ef42531017c7220c2.png" alt="">   Once installed, open Settings &gt; Preferences &gt; CompizConfig Settings Manager. You’ll probably want to enable the following plugins at minimum:</p>
<ul>
<li>General: Gnome Compatibility</li>
<li>Desktop: Desktop Cube, Rotate Cube</li>
<li>Effects: Animations, Window Decoration, Wobbly Windows</li>
<li>Window Management: Application Switcher, Move Window, Place Windows, Resize Window</li>
</ul>
<p>Open the “Run” box with Alt+F2 and execute <code>compiz-manager</code>. <code>compiz-manager</code> is a script for detecting and using the proper compiz options for your video hardware. Your screen will flash while Compiz and gtk-window-decorator initialize and replace Marco, MATE’s default window manager. If your windows are missing titlebars, double-check you’ve enabled “Window Decoration” in <code>ccsm</code>. If all seems well, add <code>compiz-manager</code> as a new startup application (in Settings &gt; Preferences &gt; Startup Applications), then change MATE’s window manager preference in DConf:  </p>
<pre><code>gsettings set org.mate.session.required-components windowmanager compiz
</code></pre><p>To switch back, use the same command with the argument <code>marco</code>.</p>
<h3 id="Window-Maker"><a href="#Window-Maker" class="headerlink" title="Window Maker"></a>Window Maker</h3><p>It isn’t as popular or well-known as the others here, but <a href="http://windowmaker.org/" target="_blank" rel="noopener">Window Maker</a> is my favorite and longest-used window manager. It is based on the look and feel of the <a href="https://en.wikipedia.org/wiki/NEXTSTEP" target="_blank" rel="noopener">NEXTSTEP</a> operating system, the OS that became Rhapsody and then Mac OS X and iOS. Unlike the extremely limited one-dimensional Mac OS X dock, Window Maker offers a main dock as well as a “clip” dock that is unique to each virtual desktop. Docks can hold normal launchers and “dockapps”, small self-contained dock accessories.   <img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/9b7aa3e7b3fa31db8d1eb0cd3d91a318.png" alt="">   You can install Window Maker from <a href="http://freshports.org/x11-wm/windowmaker" title="x11-wm/windowmaker" target="_blank" rel="noopener">x11-wm/windowmaker</a> and start it with <code>exec wmaker</code> in your <code>.xinitrc</code>. In addition, I also show <a href="http://freshports.org/x11-clocks/wmclock" title="x11-clocks/wmclock" target="_blank" rel="noopener">x11-clocks/wmclock</a>, <a href="http://freshports.org/sysutils/wmcpuload" title="sysutils/wmcpuload" target="_blank" rel="noopener">sysutils/wmcpuload</a>, <a href="http://freshports.org/net/wmnd" title="net/wmnd" target="_blank" rel="noopener">net/wmnd</a>, <a href="http://freshports.org/audio/wmix" title="audio/wmix" target="_blank" rel="noopener">audio/wmix</a>, <a href="http://freshports.org/x11/sakura" title="x11/sakura" target="_blank" rel="noopener">x11/sakura</a>, and <a href="http://freshports.org/x11-fm/rox-filer" title="x11-fm/rox-filer" target="_blank" rel="noopener">x11-fm/rox-filer</a>. The first time you start Window Maker you should run <code>wmaker.inst</code> to install the starter configuration to your <code>~/GNUstep</code> directory.</p>
<h3 id="Enlightenment"><a href="#Enlightenment" class="headerlink" title="Enlightenment"></a>Enlightenment</h3><p><a href="http://www.enlightenment.org/" target="_blank" rel="noopener">Enlightenment</a> was the original eye-candy desktop before modern compositors were even a thing. <a href="http://www.enlightenment.org/?p=about/e17" target="_blank" rel="noopener">Version 0.17</a> was the ambitious rewrite release that almost never came out until <a href="http://e17releasemanager.wordpress.com/" target="_blank" rel="noopener">e17releasemanager</a> got it out the door. Since then it has followed a steady update schedule and is no longer vaporware. It contains an eye-catching desktop built on the project’s own <a href="https://en.wikipedia.org/wiki/Enlightenment_Foundation_Libraries" target="_blank" rel="noopener">Enlightenment Foundation Libraries</a>. E17 is shiny, bouncy, extendable, and very configurable. You can install it from <a href="http://freshports.org/x11-wm/enlightenment" title="x11-wm/enlightenment" target="_blank" rel="noopener">x11-wm/enlightenment</a> and run it with <code>exec enlightenment_start</code> in your <code>.xinitrc</code>.   <img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/a8fe3a3d8a9679085c3da6a021c74934.png" alt="">  </p>
<h3 id="XFCE"><a href="#XFCE" class="headerlink" title="XFCE"></a>XFCE</h3><p><a href="http://www.xfce.org/" target="_blank" rel="noopener">XFCE</a> descends, like <a href="https://en.wikipedia.org/wiki/K_Desktop_Environment_1" target="_blank" rel="noopener">KDE</a>, from the design of the once-proprietary <a href="https://en.wikipedia.org/wiki/Common_Desktop_Environment" target="_blank" rel="noopener">Common Desktop Environment</a>. As of XFCE 4.0, however, the desktop has become more of a GNOME-lite, the “other” GTK+ desktop environment. I don’t have much to say about it, but it is a very functional and lightweight desktop with panels, a window manager, a great file manager (Thunar), and some other lightweight applications like a terminal.   <img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/2d8750c29c1dcc71ab8d306d99a33595.png" alt="">   You can start XFCE with <code>exec startxfce4</code> in your <code>.xinitrc</code>.</p>
<h3 id="Cinnamon"><a href="#Cinnamon" class="headerlink" title="Cinnamon"></a>Cinnamon</h3><p><a href="http://cinnamon.linuxmint.com/" target="_blank" rel="noopener">Cinnamon</a> is a GTK 3 desktop environment from the Linux Mint project. It began as a fork of the GNOME 3 Shell into a more traditional panels and menus UI since many were dissatisfied with the drastic redesign of a beloved environment. It’s come into its own as a modern DE and offers everything you would expect from GNOME 2 or MATE with a cohesive feel and forks of several of the <a href="https://wiki.gnome.org/Design/Apps/" target="_blank" rel="noopener">GNOME core apps</a>. You can install Cinnamon from <a href="http://freshports.org/x11/cinnamon" title="x11/cinnamon" target="_blank" rel="noopener">x11/cinnamon</a> and start it with <code>exec cinnamon-session</code> in your <code>.xinitrc</code>. There is also a fallback software-rendering mode that can be started with <code>exec cinnamon-session-cinnamon2d</code> instead.   <img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/63d2407c50682a56b0ef949e4fd542df.png" alt="">  </p>
<h3 id="GNOME-3"><a href="#GNOME-3" class="headerlink" title="GNOME 3"></a>GNOME 3</h3><p><a href="http://www.gnome.org/gnome-3/" target="_blank" rel="noopener">GNOME 3</a>, available on Linux since 3.0 in the spring of 2011, is finally available in the official FreeBSD tree as of November 2014. The three and a half year delay is thanks to the upstream GNOME project’s <a href="https://blogs.oracle.com/jeffcai/entry/device_kit_will_replace_hal" target="_blank" rel="noopener">years-long</a> <a href="https://mail.gnome.org/archives/desktop-devel-list/2011-May/msg00439.html" target="_blank" rel="noopener">fight</a> against any operating system that doesn’t have a penguin for a mascot. It took several years and a vastly waning userbase, then suddenly <a href="http://blogs.gnome.org/desrt/2014/02/19/on-portability/" target="_blank" rel="noopener">they care about portability</a> again. Sure, okay. Either way, it’s here and you can install it from <a href="http://freshports.org/x11/gnome3" title="x11/gnome3" target="_blank" rel="noopener">x11/gnome3</a>. We <a href="https://cooltrainer.org/images/original/Gnome3-crashed-lol.png" target="_blank" rel="noopener">weren’t missing much</a> in the delay, since the GNOME team <a href="http://igurublog.wordpress.com/2012/11/05/gnome-et-al-rotting-in-threes/" target="_blank" rel="noopener">tossed out everything</a> great about their once-ubiquitous DE and turned it into a shiny but unconfigurable iOS imitator where basic features and options are either <a href="http://www.jwz.org/blog/2011/10/has-gnome-3-decided-that-people-shouldnt-want-screen-savers/" target="_blank" rel="noopener">not available at all</a>, buried inside a <a href="http://blog.fpmurphy.com/2011/03/customizing-the-gnome-3-shell.html" target="_blank" rel="noopener">settings registry</a> more reminiscent of Windows 98 than BSD, or relegated to extensions that will <a href="http://rrt.sc3d.org/Log/GNOME%203%20extensions:%20the%20madness%20must%20end" target="_blank" rel="noopener">break with every new minor version</a> thanks to the lack of any stable extensions API and whose very existence are <a href="https://mail.gnome.org/archives/gnome-shell-list/2011-June/msg00110.html" target="_blank" rel="noopener">opposed</a> by many of the main project contributors. Take a look at the <a href="https://extensions.gnome.org/" target="_blank" rel="noopener">GNOME Shell Extensions</a> page with me and be amused that you need an extension to <a href="https://extensions.gnome.org/extension/19/user-themes/" target="_blank" rel="noopener">use a theme</a>, <a href="https://extensions.gnome.org/extension/6/applications-menu/" target="_blank" rel="noopener">categorize the Applications menu</a>, remove the otherwise-omnipresent <a href="https://extensions.gnome.org/extension/112/remove-accesibility/" target="_blank" rel="noopener">accessibility menu</a> from the status bar, or even <a href="https://extensions.gnome.org/extension/5/alternative-status-menu/" target="_blank" rel="noopener">power off your computer</a> without knowing about the <a href="https://wiki.gnome.org/Projects/GnomeShell/CheatSheet#The_top_bar" target="_blank" rel="noopener">magic Alt-button toggle</a>.   <img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/a19467682d2a2b2a8b15b50b4abdcea3.png" alt="">   If you want a great GTK-based desktop environment maintained by a team that doesn’t hate you, check out <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#mate-ne-gnome-2" target="_blank" rel="noopener">MATE</a>, <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#xfce" target="_blank" rel="noopener">XFCE</a>, or <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#cinnamon" target="_blank" rel="noopener">Cinnamon</a>. All three are excellent. I guess I can thank the GNOME project’s self-destruction for getting me back into <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#window-maker" target="_blank" rel="noopener">Window Maker</a>.</p>
<h3 id="Theming"><a href="#Theming" class="headerlink" title="Theming"></a>Theming</h3><p><a href="https://cooltrainer.org/images/original/freebsd10-qgtkstyle.png" target="_blank" rel="noopener"><img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/b34ca84b3ad7d738566ec6e881947cf8.png" alt=""></a> Finding Clearlooks too drab and blue? You can find a world of themes and icons for MATE over on <a href="http://gnome-look.org/" target="_blank" rel="noopener">GNOME-Look</a>, for KDE at <a href="http://kde-look.org/" target="_blank" rel="noopener">KDE-Look</a>, for XFCE at <a href="http://xfce-look.org/" target="_blank" rel="noopener">XFCE-Look</a>, for E17 at <a href="http://e17-stuff.org/" target="_blank" rel="noopener">E17-Stuff</a>, and for several lightweight window managers at <a href="http://box-look.org/" target="_blank" rel="noopener">Box-Look</a>. There are several attractive and usable themes buried among the OS X Aqua clones, Vista Aero clones, and black-as-my-soul darkness-fests that are standard on any theming website. You can change theme settings for Qt4 applications with <code>qt4-qtconfig</code> and for KDE Qt applications (like Clementine) in the <a href="https://userbase.kde.org/System_Settings" target="_blank" rel="noopener">KDE System Settings</a>. GTK+ is selectable in many window managers’ appearance preferences, and you can also install <a href="http://freshports.org/x11-themes/lxappearance" title="x11-themes/lxappearance" target="_blank" rel="noopener">x11-themes/lxappearance</a> for a light GTK theme switcher.</p>
<h2 id="Extras-and-Miscellany"><a href="#Extras-and-Miscellany" class="headerlink" title="Extras and Miscellany"></a>Extras and Miscellany</h2><h3 id="Printing"><a href="#Printing" class="headerlink" title="Printing"></a>Printing</h3><p><a href="http://www.cups.org/" target="_blank" rel="noopener">CUPS</a> is the standard for printing on Free Unix-like systems and can be installed from Ports along with any needed filters. Install the CUPS meta-port at <a href="http://freshports.org/print/cups" title="print/cups" target="_blank" rel="noopener">print/cups</a>. Install <a href="http://hplipopensource.com/hplip-web/index.html" target="_blank" rel="noopener">HPLIP</a> in <a href="http://freshports.org/print/hplip" title="print/hplip" target="_blank" rel="noopener">print/hplip</a> for HP printer drivers (and my Brother HL-2170W, for some reason). Install the <a href="http://www.linuxfoundation.org/collaborate/workgroups/openprinting/database/foomatic" target="_blank" rel="noopener">Foomatic</a> filter collection in <a href="http://freshports.org/print/foomatic-filters" title="print/foomatic-filters" target="_blank" rel="noopener">print/foomatic-filters</a> and its database and engine in <a href="http://freshports.org/print/foomatic-db" title="print/foomatic-db" target="_blank" rel="noopener">print/foomatic-db</a> and <a href="http://freshports.org/print/foomatic-db-engine" title="print/foomatic-db-engine" target="_blank" rel="noopener">print/foomatic-db-engine</a>, respectively. I find the CUPS-PDF virtual printer in <a href="http://freshports.org/print/cups-pdf" title="print/cups-pdf" target="_blank" rel="noopener">print/cups-pdf</a> very useful as well. Enable CUPS once installed: /etc/rc.conf</p>
<pre><code># Disable line printer daemon since we have CUPS
lpd_enable=&quot;NO&quot;

# Enable CUPS
cupsd_enable=&quot;YES&quot;
</code></pre><p>Add local users to the <code>cups</code> group if you want them to be able to print.  </p>
<pre><code>pw usermod root -G cups
pw usermod okeeblow -G cups
</code></pre><p>Start the CUPS service with <code>service cupsd start</code> and you should be able to access its web configuration UI at <a href="http://localhost:631/" target="_blank" rel="noopener">http://localhost:631/</a> in your web browser. It may prompt you for your root password to write the config files in <code>/usr/local/etc/cups</code>. Most full desktop environments include a GUI to control CUPS and add printers, but the web interface is available in any of them.   <img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/935574bfa58b4e9dff214792c03e6298.png" alt="">   The web interfaces’ built-in documentation can help you configure different models of printer, specifically the <a href="http://localhost:631/help/network.html?TOPIC=Getting+Started&amp;QUERY=#PROTOCOLS" target="_blank" rel="noopener">Network Protocols Supported by CUPS</a> and <a href="http://localhost:631/help/network.html?TOPIC=Getting+Started&amp;QUERY=#URI" target="_blank" rel="noopener">Common Network Printer URIs</a> sections.</p>
<h3 id="S-M-R-T"><a href="#S-M-R-T" class="headerlink" title="S.M.R.T."></a>S.M.R.T.</h3><p><a href="http://freshports.org/sysutils/smartmontools" title="sysutils/smartmontools" target="_blank" rel="noopener">sysutils/smartmontools</a> installs <code>smartd</code> and <code>smartctl</code>, a daemon and utility for checking the <a href="https://en.wikipedia.org/wiki/S.M.A.R.T." target="_blank" rel="noopener">S.M.A.R.T.</a> status of your local disks. Enable the sample <code>smartd.conf</code>. It contains one directive, <code>DEVICESCAN</code>, that causes smartd to scan all attached drives.  </p>
<pre><code>cp /usr/local/etc/smartd.conf.sample /usr/local/etc/smartd.conf
echo &apos;smartd_enable=&quot;YES&quot;&apos; &gt;&gt; /etc/rc.conf
service smartd start
</code></pre><p>You can check the S.M.A.R.T. status of a drive directly with <code>smartctl</code> as root. The <code>-H</code> flag will show basic pass or fail health status, and the <code>-a</code> flag will show everything. smartctl -H /dev/ada0</p>
<pre><code>smartctl 6.2 2014-02-18 r3874 [FreeBSD 10.0-RELEASE-p2 amd64] (local build)
Copyright (C) 2002-13, Bruce Allen, Christian Franke, www.smartmontools.org

=== START OF READ SMART DATA SECTION ===
SMART overall-health self-assessment test result: PASSED
</code></pre><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><p>FreeBSD has several available Java providers, including <a href="http://openjdk.java.net/" target="_blank" rel="noopener">OpenJDK</a> and Sun’s Oracle’s JDK. I recommend the newest OpenJDK for most people. It’s far easier to install than the binary Oracle JRE which requires logging in to a web page, agreeing to the license, and manually downloading the distfile for Ports. At the time of this writing the newest OpenJDK is <a href="http://freshports.org/java/openjdk8" title="java/openjdk8" target="_blank" rel="noopener">java/openjdk8</a>. OpenJDK 6 and 7 are available as well if you have software that doesn’t run on Java 8. If you need a Java browser plugin you can install <a href="http://freshports.org/java/icedtea-web" title="java/icedtea-web" target="_blank" rel="noopener">java/icedtea-web</a> once a Java provider is available.</p>
<h3 id="Webcams-and-DVB"><a href="#Webcams-and-DVB" class="headerlink" title="Webcams and DVB"></a>Webcams and DVB</h3><p>Most USB webcams and many DVB tuners are supported by <a href="http://freshports.org/multimedia/webcamd" title="multimedia/webcamd" target="_blank" rel="noopener">multimedia/webcamd</a>, and webcamd depends on the userland character device driver in <a href="http://freshports.org/multimedia/cuse4bsd-kmod" title="multimedia/cuse4bsd-kmod" target="_blank" rel="noopener">multimedia/cuse4bsd-kmod</a>. Install them, then enable them in <code>rc.conf</code> and <code>loader.conf</code>. /etc/rc.conf</p>
<pre><code># Webcam daemon
webcamd_enable=&quot;YES&quot;
</code></pre><p>/boot/loader.conf</p>
<pre><code># Userland character device driver for webcams
cuse4bsd_load=&quot;YES&quot;
</code></pre><p>You can use your camera device with <a href="http://raaf.atspace.org/" target="_blank" rel="noopener">pwcview</a> available in <a href="http://freshports.org/multimedia/pwcview" title="multimedia/pwcview" target="_blank" rel="noopener">multimedia/pwcview</a> or with <a href="https://wiki.gnome.org/Apps/Cheese" target="_blank" rel="noopener">Cheese</a> in <a href="http://freshports.org/multimedia/cheese" title="multimedia/cheese" target="_blank" rel="noopener">multimedia/cheese</a>. Cheese provides a nice interface similar to Apple’s Photobooth on OS X, but it has a heavy GNOME library dependency some may not want on their systems.</p>
<h3 id="IBus"><a href="#IBus" class="headerlink" title="IBus"></a>IBus</h3><p><a href="https://code.google.com/p/ibus/" target="_blank" rel="noopener">IBus</a> is a modern IME for Unix-like systems, allowing one to input <a href="https://en.wikipedia.org/wiki/CJK_characters" target="_blank" rel="noopener">CJK</a> languages. Install the main IME from <a href="http://freshports.org/textproc/ibus" title="textproc/ibus" target="_blank" rel="noopener">textproc/ibus</a> as well as QT application support from <a href="http://freshports.org/textproc/ibus-qt" title="textproc/ibus-qt" target="_blank" rel="noopener">textproc/ibus-qt</a>. You’ll need one or more input methods once the IME itself is installed. Ports of interest:</p>
<ul>
<li><a href="http://freshports.org/chinese/ibus-chewing" title="chinese/ibus-chewing" target="_blank" rel="noopener">chinese/ibus-chewing</a> - Chewing engine for IBus</li>
<li><a href="http://freshports.org/chinese/ibus-pinyin" title="chinese/ibus-pinyin" target="_blank" rel="noopener">chinese/ibus-pinyin</a> - The PinYin input method</li>
<li><a href="http://freshports.org/japanese/ibus-anthy" title="japanese/ibus-anthy" target="_blank" rel="noopener">japanese/ibus-anthy</a> - Anthy engine for IBus</li>
<li><a href="http://freshports.org/japanese/ibus-mozc" title="japanese/ibus-mozc" target="_blank" rel="noopener">japanese/ibus-mozc</a> - Mozc engine for IBus</li>
<li><a href="http://freshports.org/japanese/ibus-skk" title="japanese/ibus-skk" target="_blank" rel="noopener">japanese/ibus-skk</a> - SKK engine for IBus</li>
<li><a href="http://freshports.org/korean/ibus-hangul" title="korean/ibus-hangul" target="_blank" rel="noopener">korean/ibus-hangul</a> - Hangul engine for IBus</li>
<li><a href="http://freshports.org/textproc/ibus-kmfl" title="textproc/ibus-kmfl" target="_blank" rel="noopener">textproc/ibus-kmfl</a> - KMFL IMEngine for IBus framework</li>
<li><a href="http://freshports.org/textproc/ibus-m17n" title="textproc/ibus-m17n" target="_blank" rel="noopener">textproc/ibus-m17n</a> - The m17n IMEngine for IBus framework</li>
<li><a href="http://freshports.org/textproc/ibus-table" title="textproc/ibus-table" target="_blank" rel="noopener">textproc/ibus-table</a> - Table based IM framework for IBus</li>
</ul>
<p>Heavyweight desktop environments like GNOME or KDE will let you configure the input method graphically. In GNOME 2 and MATE, for example, you can open the IBus preferences from the Settings &gt; Preferences menu. KDE/Qt users can enable it as the default IME in <code>qtconfig-qt4</code>. Lightweight window manager users like me can start it in <code>.xinitrc</code>: ~/.xinitrc</p>
<pre><code>export XMODIFIERS=&quot;@im=ibus&quot;
export GTK_IM_MODULE=&quot;ibus&quot;
export QT_IM_MODULE=&quot;ibus&quot;
exec ibus-daemon -d -x &amp;
</code></pre><p>Now run any GTK or QT application, press your keyboard shortcut to switch input methods, and test it out. <a href="https://cooltrainer.org/images/original/IBusmethods.png" target="_blank" rel="noopener"><img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/d75f0d935d5fd2ec48c161fcd96de4f1.png" alt=""></a> <a href="https://cooltrainer.org/images/original/GVim-nihongo.png" target="_blank" rel="noopener"><img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/2a24b25dd4df49fee6443685ae46f1f2.png" alt=""></a></p>
<h3 id="Linuxulator"><a href="#Linuxulator" class="headerlink" title="Linuxulator"></a>Linuxulator</h3><p>FreeBSD’s <a href="http://www.freebsd.org/cgi/man.cgi?query=linux&amp;ektion=&amp;manpath=FreeBSD%2011.0-RELEASE" title="man linux from FreeBSD 11.0-RELEASE" target="_blank" rel="noopener">Linuxulator</a> allows it to run Linux application binaries using <a href="http://www.leidinger.net/blog/2010/09/28/the-freebsd-linuxulator-explained-for-users/" target="_blank" rel="noopener">system call translation</a>. Desktop users will find it useful for running the handful of proprietary but necessary programs that are available for Linux but not for FreeBSD, such as <a href="http://www.adobe.com/support/security/#flashplayer" target="_blank" rel="noopener">Adobe Flash Player</a>. Install the Linux base distribution from Ports. As I write this the default base distribution is <a href="http://freshports.org/emulators/linux_base-c6" title="emulators/linux_base-c6" target="_blank" rel="noopener">emulators/linux_base-c6</a>, based on CentOS 6, replacing the old Fedora 10 based <code>linux_base-f10</code>. A newer CentOS 7 <a href="http://freshports.org/emulators/linux_base-c7" title="emulators/linux_base-c7" target="_blank" rel="noopener">emulators/linux_base-c7</a> is also available and will become the default at some point in the future. Once your chosen <code>linux_base</code> installed, tell your system to load the <code>linux</code> kernel module at boot.  </p>
<pre><code>echo &apos;linux_load=&quot;YES&quot;&apos; &gt;&gt; /boot/loader.conf
kldload linux
</code></pre><p>Mount the <a href="http://www.freebsd.org/cgi/man.cgi?query=linprocfs&amp;ektion=&amp;manpath=" title="man linprocfs" target="_blank" rel="noopener">linprocfs</a> virtual filesystems for compatibility with GNOME and other programs requiring them. /etc/fstab</p>
<pre><code>linproc   /compat/linux/proc   linprocfs,auto,late   rw   0  0
</code></pre><p>  <img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/a993a24ae9704b9f89f4904186513e2a.png" alt="">   Besides proprietary garbageware like Flash Player I also use Linuxulator along with the <a href="http://www.swanson.ukfsn.org/loki/" target="_blank" rel="noopener">Loki compatibility library package</a> to run <a href="https://en.wikipedia.org/wiki/Loki_Software" target="_blank" rel="noopener">Loki Software</a>’s Linux ports of some of the best PC games ever made, like Simcity 3000 Unlimited.</p>
<h3 id="Wine"><a href="#Wine" class="headerlink" title="Wine"></a>Wine</h3><p>Wine is a free implementation of the Win32 API capable of running real Windows applications on Unix-like systems. It’s available from <a href="http://freshports.org/emulators/wine" title="emulators/wine" target="_blank" rel="noopener">emulators/wine</a> <a href="http://freshports.org/emulators/wine-devel" title="emulators/wine-devel" target="_blank" rel="noopener">emulators/wine-devel</a>, or <a href="http://freshports.org/emulators/wine-staging" title="emulators/wine-staging" target="_blank" rel="noopener">emulators/wine-staging</a>, containing the latest stable, unstable, and staging versions respectively. The optional <a href="http://freshports.org/emulators/wine-gecko" title="emulators/wine-gecko" target="_blank" rel="noopener">emulators/wine-gecko</a> is an <code>mshtml.dll</code> replacement that will allow Windows programs to embed web pages using the Mozilla engine. The optional <a href="http://freshports.org/emulators/wine-mono" title="emulators/wine-mono" target="_blank" rel="noopener">emulators/wine-mono</a> will let Wine run Windows programs written in versions 1.x or 2.0 of the <a href="http://en.wikipedia.org/wiki/.NET_Framework" target="_blank" rel="noopener">.NET Framework</a> without using the proprietary .NET runtime. You can also install <a href="http://freshports.org/emulators/winetricks" title="emulators/winetricks" target="_blank" rel="noopener">emulators/winetricks</a>, a script containing Wine installation recipes for popular software, and you may find a Wine GUI such as <a href="http://freshports.org/emulators/swine" title="emulators/swine" target="_blank" rel="noopener">emulators/swine</a> useful for maintaining separate Wine prefixes. Installing 64-bit Wine on an <code>amd64</code> FreeBSD system normally precludes you from running 32-bit Windows software, a.k.a. most of the software you probably care about. As a workaround, <code>i386</code> Wine packages are also available. You can install them from <a href="http://freshports.org/emulators/i386-wine" title="emulators/i386-wine" target="_blank" rel="noopener">emulators/i386-wine</a>, <a href="http://freshports.org/emulators/i386-wine-devel" title="emulators/i386-wine-devel" target="_blank" rel="noopener">emulators/i386-wine-devel</a>, or <a href="http://freshports.org/emulators/i386-wine-staging" title="emulators/i386-wine-staging" target="_blank" rel="noopener">emulators/i386-wine-staging</a>. If you plan to use Wine to run <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#browser-plugins" target="_blank" rel="noopener">browser plugins</a>, use the <code>staging</code>-patched version of wine in <a href="http://freshports.org/emulators/wine-staging" title="emulators/wine-staging" target="_blank" rel="noopener">emulators/wine-staging</a> or <a href="http://freshports.org/emulators/i386-wine-staging" title="emulators/i386-wine-staging" target="_blank" rel="noopener">emulators/i386-wine-staging</a>.   <img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/50c0e7b7b530042285f8e3806e05b2a3.png" alt="">   Wine is very impressively-compatible these days. I use it to run a lot of games from <a href="https://www.humblebundle.com/store" target="_blank" rel="noopener">Humble Store</a> and <a href="http://www.gog.com/" target="_blank" rel="noopener">GOG</a> so I don’t have to fire up a Windows computer or VM. Wine is so good it is used to create the Linux versions of many of these titles, such as <a href="http://freedomplanet.galaxytrail.com/" target="_blank" rel="noopener">Freedom Planet</a>, and in that case it’s a lot easier to run the same executable in FreeBSD Wine than to try and get the Linux Wine binaries running via <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#linuxulator" target="_blank" rel="noopener">Linuxulator</a>. If every <code>wine</code> command fails with <code>ELF interpreter /libexec/ld-elf.so.1 not found</code> your 64-bit system is missing the 32-bit libraries necessary for Wine. You’ll need to install them. From the <a href="https://cooltrainer.org/a-freebsd-desktop-howto/ftp://ftp.freebsd.org/pub/FreeBSD/releases/amd64/" target="_blank" rel="noopener">releases FTP</a>, grab the <code>lib32.txz</code> matching your version of the OS and extract it either as root or with sudo to the root of your filesystem to install. The archive contains a full directory hierarchy so all the files will end up in the right place.  </p>
<pre><code>fetch ftp://ftp.freebsd.org/pub/FreeBSD/releases/amd64/11.0-RELEASE/lib32.txz
tar xfp lib32.txz -C /
</code></pre><h3 id="Browser-Plugins"><a href="#Browser-Plugins" class="headerlink" title="Browser Plugins"></a>Browser Plugins</h3><blockquote>
<p>NOTE on <a href="https://en.wikipedia.org/wiki/NPAPI" target="_blank" rel="noopener">NPAPI</a> Deprecation: <a href="https://blog.mozilla.org/futurereleases/2015/10/08/npapi-plugins-in-firefox/" target="_blank" rel="noopener">Firefox</a> and <a href="https://blog.chromium.org/2014/11/the-final-countdown-for-npapi.html" target="_blank" rel="noopener">Chromium</a> are deprecating support for NPAPI plugins, so everything in this section will stop working at that time. Chromium removed support as of version 32. Firefox 52 is the last version with support and will be available as <a href="http://freshports.org/www/firefox-esr" title="www/firefox-esr" target="_blank" rel="noopener">www/firefox-esr</a> until the release of ESR 60.</p>
</blockquote>
<p><a href="http://www.adobe.com/support/security/#flashplayer" target="_blank" rel="noopener">Adobe Flash Player</a> is not released for FreeBSD but is usable on FreeBSD i386 and amd64 through your choice of two wrappers. The 32-bit Linux version of the Flash plugin can be installed via <a href="http://freshports.org/www/linux-c6-flashplugin24" title="www/linux-c6-flashplugin24" target="_blank" rel="noopener">www/linux-c6-flashplugin24</a> or <a href="http://freshports.org/www/linux-c7-flashplugin24" title="www/linux-c7-flashplugin24" target="_blank" rel="noopener">www/linux-c7-flashplugin24</a>, executed through <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#linuxulator" target="_blank" rel="noopener">Linuxulator</a>, and adapted to 32-bit or 64-bit native browsers with <a href="http://freshports.org/www/nspluginwrapper" title="www/nspluginwrapper" target="_blank" rel="noopener">www/nspluginwrapper</a>. Adobe <a href="http://www.zdnet.com/blog/open-source/adobe-abandons-linux/10418" target="_blank" rel="noopener">dropped support</a> for the NPAPI Linux version of Flash with version 11.2 back in 2012. They left development up to Google who deprecated NPAPI and only released a <a href="https://en.wikipedia.org/wiki/Google_Native_Client#Pepper" target="_blank" rel="noopener">PPAPI</a> version for many years as part of their proprietary Chrome browser bundle, something that isn’t even available for FreeBSD. Adobe, in a surprising move, <a href="https://blogs.adobe.com/flashplayer/2016/08/beta-news-flash-player-npapi-for-linux.html" target="_blank" rel="noopener">resumed Linux NPAPI Flash plugin development</a> in 2016. To use nspluginwrapper, make sure <code>linprocfs</code> is mounted and execute <code>nspluginwrapper -v -a -i</code> as your normal user to locate and enable the Linux Flash plugin. <code>-a</code> automatically finds available plugins and <code>-i</code> installs them. It’s important to remember it makes a copy of the Flash library in your home directory when you do this, so every time you update the version of Flash installed through Ports you need to remove your local cory with <code>nspluginwrapper -v -a -r</code> and install the new one with <code>nspluginwrapper -v -a -i</code>. Adobe promised security updates for the NPAPI Flash Player through 2017, and if history is any indication <a href="http://www.cvedetails.com/product/6761/Adobe-Flash-Player.html?vendor_id=53" target="_blank" rel="noopener">you’re going to need them</a>. A newer and arguably better solution is <a href="http://freshports.org/emulators/pipelight" title="emulators/pipelight" target="_blank" rel="noopener">emulators/pipelight</a>, a <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#wine" target="_blank" rel="noopener">Wine</a>-based wrapper for Windows browsers plugins. It supports the very newest version of Windows Flash, freeing us from the limitations of Adobe’s Linux development, and also supports Shockwave, Silverlight, Unity, Widevine, and more. It requires a special patched version of Wine, <a href="http://freshports.org/emulators/wine-staging" title="emulators/wine-staging" target="_blank" rel="noopener">emulators/wine-staging</a> or <a href="http://freshports.org/emulators/i386-wine-staging" title="emulators/i386-wine-staging" target="_blank" rel="noopener">emulators/i386-wine-staging</a>. Once installed, activate plugins as root.  </p>
<pre><code>pipelight-plugin --update
pipelight-plugin --create-mozilla-plugins
pipelight-plugin --enable flash
</code></pre><p>Silverlight is available as well and can allow you to watch DRMed NetFlix content via your browser on FreeBSD. I have no experience using it since I don’t buy DRMed streaming media subscriptions, but it can be installed the same way.  </p>
<pre><code>pipelight-plugin --enable silverlight5.1
</code></pre><p>Heed <a href="http://freshports.org/www/pipelight" title="www/pipelight" target="_blank" rel="noopener">www/pipelight</a>’s <a href="https://svnweb.freebsd.org/ports/head/emulators/pipelight/pkg-message?view=log" target="_blank" rel="noopener">pkg-message</a> warning about Silverlight DRM if you have a ZFS-based system:</p>
<blockquote>
<p>For users running with ZFS on root, watching DRM protected content requires extensive xattr support. If you run into issues with DRM failing, you can use the “pipelight-mkufs” command to create a UFS formatted ZVOL mounted on your users ~/.wine-pipelight directory.</p>
</blockquote>
<p>Other plugins are enabled the same way, and the list of available plugins can be seen in <code>pipelight-plugin --help</code>.</p>
<h3 id="Virtualization"><a href="#Virtualization" class="headerlink" title="Virtualization"></a>Virtualization</h3><p>It’s pretty common to virtualize another operating system on your computer, possibly to run a proprietary program or access a proprietary office groupware system. Whatever the reason, it’s easy to accomplish on FreeBSD. <a href="https://cooltrainer.org/images/original/freebsd10-vboxmanage.png" target="_blank" rel="noopener"><img src="https://w.msla.top/wordpress/wp-content/uploads/2017/08/091b2509ea6e042ea139c40c61fd7d06.png" alt=""></a> FreeBSD 10 has a new built-in hypervisor known as <a href="http://bhyve.org/" target="_blank" rel="noopener">bhyve</a> capable of running FreeBSD natively and other operating systems via <a href="http://freshports.org/sysutils/grub2-bhyve" title="sysutils/grub2-bhyve" target="_blank" rel="noopener">sysutils/grub2-bhyve</a>. Originally bhyve supported only a serial console but as of FreeBSD 11 <a href="http://justinholcomb.me/blog/2016/05/28/bhyve-uefi-gop-support.html" target="_blank" rel="noopener">also supports graphics</a>. Alternatively, VirtualBox open source edition is available at <a href="http://freshports.org/emulators/virtualbox-ose" title="emulators/virtualbox-ose" target="_blank" rel="noopener">emulators/virtualbox-ose</a>. Build it with Guest Additions enabled for the best experience virtualizing Windows and Linux. To use VirtualBox, configure <code>loader.conf</code> to load the VirtualBox kernel module and configure <code>rc.conf</code> to start VirtualBox bridged networking. /boot/loader.conf </p>
<pre><code>vboxdrv_load=&quot;YES&quot;
</code></pre><p>/etc/rc.conf</p>
<pre><code>vboxnet_enable=&quot;YES&quot;
</code></pre><p>/etc/devfs.conf</p>
<pre><code># Allow VirtualBox network access
own     vboxnetctl      root:vboxusers
perm    vboxnetctl      0660




pw usermod okeeblow -G vboxusers
</code></pre><h3 id="Skype"><a href="#Skype" class="headerlink" title="Skype"></a>Skype</h3><p>Skype is bad, proprietary software that doesn’t value your freedom. Use <a href="http://freshports.org/audio/mumble" title="audio/mumble" target="_blank" rel="noopener">audio/mumble</a> or <a href="http://freshports.org/net-im/ekiga" title="net-im/ekiga" target="_blank" rel="noopener">net-im/ekiga</a> instead if you can. If you still wish to use Skype, make sure you have <a href="https://cooltrainer.org/a-freebsd-desktop-howto/#linuxulator" target="_blank" rel="noopener">Linuxulator</a> enabled and install <a href="http://freshports.org/net-im/skype" title="net-im/skype" target="_blank" rel="noopener">net-im/skype</a>. Version 2.1 of Skype’s Linux client dropped support for OSS, found in FreeBSD as the default sound API. Thanks to this, Skype 2.0 persisted for years as the version in Ports. With the introduction of an <a href="http://lists.freebsd.org/pipermail/svn-src-all/2011-May/038480.html" target="_blank" rel="noopener">ALSA compatibility shim in FreeBSD 8.3 and 9.0</a> and <a href="http://freshports.org/audio/linux-c6-alsa-plugins-oss" title="audio/linux-c6-alsa-plugins-oss" target="_blank" rel="noopener">audio/linux-c6-alsa-plugins-oss</a>, we can use the newer ALSA-only Skype 2.1 client. The ALSA client, unlike the old OSS client, requires some explicit configuration to use our sound devices. They must be defined manually in <code>/compat/linux/etc/alsa/pcm/pcm-oss.conf</code>, the configuration file of alsa-plugins-oss. In this example, I enable <code>pcm6</code>/<code>dsp6</code> for audio output, and <code>pcm8</code>/<code>dsp8</code>, a USB webcam, as a microphone source. /compat/linux/etc/alsa/pcm/pcm-oss.conf</p>
<pre><code>pcm.oss8 {
    type oss
    device /dev/dsp8
    hint {
        description &quot;Open Sound System - Webcam&quot;
    }
}

ctl.oss8 {
    type oss
    device /dev/mixer8
    hint {
        description &quot;Open Sound System - Webcam&quot;
    }
}

pcm.oss6 {
    type oss
    device /dev/dsp6
    hint {
        description &quot;Open Sound System - S/PDIF&quot;
    }
}

ctl.oss6 {
    type oss
    device /dev/mixer6
    hint {
        description &quot;Open Sound System - S/PDIF&quot;
    }
}
</code></pre><p>There is an even newer Skype client available as <a href="http://freshports.org/net-im/skype4" title="net-im/skype4" target="_blank" rel="noopener">net-im/skype4</a>, but that version is not usable on FreeBSD 10.x due to <a href="https://reviews.freebsd.org/D907" target="_blank" rel="noopener">missing syscalls</a> in that branch’s Linuxulator. It will work via Pulseaudio in FreeBSD 11 and later. For Skype 4.x, load the Video4Linux2 wrapper module:  </p>
<pre><code>kldload linux_v4l2wrapper
echo &apos;linux_v4l2wrapper_load=&quot;YES&quot;&apos; &gt;&gt; /boot/loader.conf
</code></pre><p>The microphone volume can be controlled by invoking the mixer of your chosen recording device. Let’s raise the microphone volume now from 0% to 75%.  </p>
<pre><code>mixer -f /dev/mixer8 mic 75
</code></pre><h3 id="ISO-8601-and-other-locales"><a href="#ISO-8601-and-other-locales" class="headerlink" title="ISO-8601 and other locales"></a>ISO-8601 and other locales</h3><p>This is personal preference, but I also set my <code>LC_TIME</code> environment variable to the <code>en_DK</code> faux-locale for <a href="http://www.iso.org/iso/support/faqs/faqs_widely_used_standards/widely_used_standards_other/date_and_time_format.htm" target="_blank" rel="noopener">ISO-8601</a> date formats instead of the ridiculous American standard. Quick, what date is 6/5/12? Oh, it’s 2012-06-05, of course. The locale isn’t included with the FreeBSD base system as it is in many Linux distributions, but it’s <a href="http://ivoras.net/blog/tree/2010-12-20.the-wonderful-en_dk-locale.html" target="_blank" rel="noopener">available</a> from Ivan Voras’ blog.  </p>
<pre><code>tar -C /usr/share/locale -zxf /path/to/your/en_DK.UTF-8.tgz
</code></pre><p>Enable it in the login database and <code>/etc/profile</code>. /etc/login.conf</p>
<pre><code>@@ -46,7 +46,8 @@
     :ignoretime@:
     :umask=022:
     :charset=UTF-8:
-    :lang=en_US.UTF-8:
+    :lang=en_US.UTF-8:
+    :setenv=LC_TIME=en_DK.UTF-8:




cap_mkdb /etc/login.conf
</code></pre><p>/etc/profile</p>
<pre><code>LC_TIME=en_DK.UTF-8; export LC_TIME
</code></pre><h2 id="Upgrade-Notes"><a href="#Upgrade-Notes" class="headerlink" title="Upgrade Notes"></a>Upgrade Notes</h2><p>This guide assumes you will track the newest <code>STABLE</code> branch, upgrading to new stable branches at the initial <code>.0</code> release. That’s not a thing I would ever recommend with OS X, but I haven’t been burned by a new major FreeBSD version yet. This section notes things you need to know to keep your system in top shape when upgrading.</p>
<h3 id="9-x-to-10-0"><a href="#9-x-to-10-0" class="headerlink" title="9.x to 10.0"></a>9.x to 10.0</h3><p>If you are updating from 9.x to 10.0 or higher, run <code>pkg2ng</code> after rebooting into the new OS. This conversion script will convert the list of installed packages from the format used by the old <code>pkg_</code> tools to the format used by pkgng, the new binary package manager. If you neglect this step the OS will think you have no packages installed and your life will become very confusing.</p>
<h3 id="10-0-to-10-1"><a href="#10-0-to-10-1" class="headerlink" title="10.0 to 10.1"></a>10.0 to 10.1</h3><p><code>WITH_NEW_XORG</code> is no longer a thing. The old version is gone. <a href="http://www.freebsd.org/cgi/man.cgi?query=vt&amp;ektion=&amp;manpath=" title="man vt" target="_blank" rel="noopener">vt</a> is a new console driver designed to replace <a href="http://www.freebsd.org/cgi/man.cgi?query=syscons&amp;ektion=&amp;manpath=" title="man syscons" target="_blank" rel="noopener">syscons</a>. It offers Unicode and graphics support using kernel modesetting. This is necessary to support UEFI. A loader variable <code>kern.vty</code> can select between <code>vt</code> and <code>sc</code>. /boot/loader.conf</p>
<pre><code>kern.vty=vt
</code></pre><p>It will default to graphics mode but can be configured to use a text mode instead if necessary. /boot/loader.conf <code>hw.vga.textmode=1</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/07/a-freebsd-11-desktop-how-to/" data-id="cjpky081s0003vn81645di3in" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/desktop/">desktop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/fastdfs/">fastdfs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/">nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/消息/">消息</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-745" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/04/745/" class="article-date">
  <time datetime="2017-07-04T06:44:42.000Z" itemprop="datePublished">2017-07-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/操作系统/">操作系统</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/04/745/">在 Debian 下安装 WordPress</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Basic-Installation-guide-for-Wheezy"><a href="#Basic-Installation-guide-for-Wheezy" class="headerlink" title="Basic Installation guide for Wheezy"></a>Basic Installation guide for Wheezy</h2><p># apt-get install wordpress curl apache2 mysql-server</p>
<p>Set the mysql admin root user password when prompted</p>
<h3 id="Create-a-site"><a href="#Create-a-site" class="headerlink" title="Create a site"></a>Create a site</h3><p># nano /etc/apache2/sites-available/wp.conf</p>
<p>Add this content:</p>
<pre><code> Alias /wp/wp-content /var/lib/wordpress/wp-content
Alias /wp /usr/share/wordpress
&lt;Directory /usr/share/wordpress&gt;
    Options FollowSymLinks
    AllowOverride Limit Options FileInfo
    DirectoryIndex index.php
    Order allow,deny
     Allow from all
&lt;/Directory&gt;
&lt;Directory /var/lib/wordpress/wp-content&gt;
    Options FollowSymLinks
    Order allow,deny
    Allow from all
&lt;/Directory&gt;
</code></pre><p>For Apache 2.4 (Jessie) you’ll need a slightly different site configuration:</p>
<p># nano /etc/apache2/sites-available/wp.conf</p>
<p>add this content:</p>
<pre><code>Alias /wp/wp-content /var/lib/wordpress/wp-content
Alias /wp /usr/share/wordpress
&lt;Directory /usr/share/wordpress&gt;
    Options FollowSymLinks
    AllowOverride Limit Options FileInfo
    DirectoryIndex index.php
    Require all granted
&lt;/Directory&gt;
&lt;Directory /var/lib/wordpress/wp-content&gt;
    Options FollowSymLinks
    Require all granted
&lt;/Directory&gt;
</code></pre><h3 id="Enable-the-site"><a href="#Enable-the-site" class="headerlink" title="Enable the site"></a>Enable the site</h3><p># a2ensite wp</p>
<p>Restart the webserver  </p>
<p># service apache2 reload</p>
<p>Create /etc/wordpress/config-$DM.php. $DM is the domain name e.g. if the fully qualified domain name is <a href="http://www.debianwordpress.dev" target="_blank" rel="noopener">www.debianwordpress.dev</a>, create one of the following files:</p>
<ul>
<li>/etc/wordpress/config-<a href="http://www.debianwordpress.dev.php" target="_blank" rel="noopener">www.debianwordpress.dev.php</a> (this is the default, use it if you are unsure)</li>
<li>/etc/wordpress/config-debianwordpress.dev.php (this is used for multisite with subdomains)</li>
<li>/etc/wordpress/config-default.php (this is used as a fallback if no other file matches your domain name)</li>
</ul>
<p>WordPress searches in the above order and uses the first configuration file it can find. The domain name is taken from the HTTP-Request of your browser. That way you may be able to define different configuration files for different domains you are hosting.</p>
<p># nano /etc/wordpress/config-<a href="http://www.debianwordpress.dev.php" target="_blank" rel="noopener">www.debianwordpress.dev.php</a></p>
<p>Add this content:-</p>
<p> &lt;?php<br> define(‘DB_NAME’, ‘wordpress’);<br> define(‘DB_USER’, ‘wordpress’);<br> define(‘DB_PASSWORD’, ‘password’);<br> define(‘DB_HOST’, ‘localhost’);<br> define(‘WP_CONTENT_DIR’, ‘/var/lib/wordpress/wp-content’);<br> ?&gt;</p>
<p><img src="https://wiki.debian.org/htdocs/debwiki/img/attention.png" alt="&lt;!&gt;" title="&lt;!&gt;"> replace password with a suitably secure password Create a file to hold the database creation instructions</p>
<p># nano ~/wp.sql</p>
<p>Add this content:-</p>
<p>CREATE DATABASE wordpress;<br>GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP,ALTER<br>ON wordpress.*<br>TO wordpress@localhost<br>IDENTIFIED BY ‘password’;<br>FLUSH PRIVILEGES;</p>
<p><img src="https://wiki.debian.org/htdocs/debwiki/img/attention.png" alt="&lt;!&gt;" title="&lt;!&gt;"> replace password with your “suitably secure password” Create the database:-</p>
<p># cat ~/wp.sql | mysql –defaults-extra-file=/etc/mysql/debian.cnf</p>
<p>Navigate to the wordpress directory in browser e.g.:- <a href="http://debianwordpress.dev/wp" target="_blank" rel="noopener">http://debianwordpress.dev/wp</a> which redirects to <a href="http://debianwordpress.dev/wp/wp-admin/install.php" target="_blank" rel="noopener">http://debianwordpress.dev/wp/wp-admin/install.php</a> where you’ll see the “classic” wordpress 5 minute install page (actually a 5 second install thanks to the Debian packaging) <img src="https://wiki.debian.org/htdocs/debwiki/img/attention.png" alt="&lt;!&gt;" title="&lt;!&gt;"> replace debianwordpress.dev with your domain name (or localhost if running on the same box as your browser). At time of writing this provides WordPress v3.6.1. WordPress v3.7.1 is available in Testing and Unstable. I haven’t tested it but it should install fine on Wheezy.</p>
<h2 id="Upgrading-the-installed-WordPress-version"><a href="#Upgrading-the-installed-WordPress-version" class="headerlink" title="Upgrading the installed WordPress version"></a>Upgrading the installed WordPress version</h2><p>For keep your WordPress up to date and receive security fixes use Debian package manager:</p>
<p># apt-get update &amp;&amp; apt-get upgrade</p>
<p>If you would like to use a more recent version of WordPress, consider using Backports or Debian testing.</p>
<h2 id="An-alternate-installation-method"><a href="#An-alternate-installation-method" class="headerlink" title="An alternate installation method"></a>An alternate installation method</h2><p>I believe this method conforms more with how the maintainer recommends it should be done. Various sources are drawn upon using this method, and it is also affected by a few bugs as at this writing. It is basically centric around a “kind of” multisite install, but I recommend this method even for a single blog, otherwise when you decide down the track to have more than one and share the packages’ codebase, you’ll have a fair bit of work on your hands. The key useful script here is /usr/share/doc/wordpress/examples/setup-mysql. This gem does a few things:</p>
<ul>
<li>Creates a WordPress config file under /etc/wordpress</li>
<li>Creates the WordPress database and user</li>
<li>Sets up a wp-content structure under /srv/www/wp-content/DOMAIN (this is key for a non-WordPress multisite install, which is covered more below)</li>
</ul>
<h3 id="Install-required-packages"><a href="#Install-required-packages" class="headerlink" title="Install required packages"></a>Install required packages</h3><p># apt-get install wordpress apache2 mysql-server</p>
<h3 id="Run-the-helper-script"><a href="#Run-the-helper-script" class="headerlink" title="Run the helper script"></a>Run the helper script</h3><p>Now run /usr/share/doc/wordpress/examples/setup-mysql, passing an argument of your site name; eg. myblog.com. You will most probably need other arguments too – just try an initial -h to get help. At this point, as per above, you should have a database created for you, and the /etc/wordpress/config-myblog.com.php config file. Peruse that and sanity check it.</p>
<h3 id="Create-the-Apache-site"><a href="#Create-the-Apache-site" class="headerlink" title="Create the Apache site"></a>Create the Apache site</h3><p>Quoting /usr/share/doc/wordpress/examples/apache.conf: There are several ways to setup Wordpress &amp; Apache in Debian. However the maintainer’s recommended way with the helper script setup-mysql uses:</p>
<p>## Virtual host VirtualDocumentRoot</p>
<pre><code>NameVirtualHost *:80

&lt;VirtualHost *:80&gt;
UseCanonicalName Off
VirtualDocumentRoot /usr/share/wordpress
Options All

# wp-content in /srv/www/wp-content/$0
RewriteEngine On
RewriteRule ^/wp-content/(.*)$ /srv/www/wp-content/%{HTTP_HOST}/$1
&lt;/VirtualHost&gt;
</code></pre><p>For this configuration to work you’ll also need to have mod_rewrite and mod_vhost_alias loaded and working in Apache. To enable these modules run</p>
<p># a2enmod rewrite &amp;&amp; a2enmod vhost_alias &amp;&amp; service apache2 restart</p>
<p>Place this config into something like /etc/apache2/sites-available/myblog.com and modify according to your needs (IP-based virtual host, name-based, logging, etc.) If you’re using any Wordpress functionality that requires URL rewriting (such as permalinks), then you will also need something like this in your Apache config:</p>
<pre><code>RewriteRule ^index.php$ - \[L\]
RewriteCond /usr/share/wordpress%{REQUEST_URI} !-f
RewriteCond /usr/share/wordpress%{REQUEST_URI} !-d
RewriteRule . /usr/share/wordpress/index.php \[L\]
# Also needed if using PHP-FPM / Fast-CGI
RewriteCond %{REQUEST_URI} !^/php5-fcgi/*
</code></pre><p>The above rewrite conditions rely on Apache finding the required files in /usr/share/wordpress for non-permalinks (such as wp-admin). This may require the following line to ensure it finds the index file when requesting /wp-admin/</p>
<pre><code>DirectoryIndex index.php
</code></pre><h3 id="Final-reading-before-actual-configuration"><a href="#Final-reading-before-actual-configuration" class="headerlink" title="Final reading before actual configuration"></a>Final reading before actual configuration</h3><p>Now would be a great time to read /usr/share/doc/wordpress/README.Debian if you haven’t already. All the rest of the pieces should fall into place once you do. Amongst other things, it explains the great way that the Debian WordPress package utilises the WordPress wp-config.php framework, and more importantly, how to handle the infamous “themes” and “plugins” directories in a WordPress install. The key point is that by symlinking under /var/lib/wordpress, users better abide by the <a href="https://wiki.debian.org/FilesystemHierarchyStandard" target="_blank" rel="noopener">FilesystemHierarchyStandard</a>, and can use the in-app upgrade mechanisms of WordPress to upgrade plugins and themes, without clobbering the package, and risking server security. It also discusses the two choices regarding multisite installs, of which this here describes the non-WordPress version.</p>
<h3 id="Enable-the-Apache-site"><a href="#Enable-the-Apache-site" class="headerlink" title="Enable the Apache site"></a>Enable the Apache site</h3><p>Now we enable the Apache site config made earlier using a2ensite, which basically just creates a symlink in /etc/apache2/sites-enabled from sites-available, then reload Apache:</p>
<p># a2ensite myblog.com<br># service apache2 reload</p>
<h3 id="Configure-WordPress"><a href="#Configure-WordPress" class="headerlink" title="Configure WordPress"></a>Configure WordPress</h3><p>Now, browse to your new domain, and follow the normal WP configuration process, and you should be done.</p>
<h3 id="Issues"><a href="#Issues" class="headerlink" title="Issues"></a>Issues</h3><p>Sadly at this point, there are some issues with symlinking, and messing around generally with WP_CONTENT_DIR. The main bug is being tracked at <a href="http://core.trac.wordpress.org/ticket/16953" target="_blank" rel="noopener">http://core.trac.wordpress.org/ticket/16953</a>. At this point, basically a fair few things break, especially if plugin or theme authors don’t do things right when determining correct filesystem and URI paths to use. There seems no easy fix right now, other than not using symlinks or non-standard (but configurable!) paths.</p>
<h2 id="See-also"><a href="#See-also" class="headerlink" title="See also"></a>See also</h2><ul>
<li>Sample configurations can be found in /usr/share/doc/wordpress/examples/</li>
<li>Debian specific instructions are /usr/share/doc/wordpress/README.Debian</li>
<li><a href="https://wiki.debian.org/LaMp" target="_blank" rel="noopener">LAMP</a></li>
</ul>
<h2 id="External-links"><a href="#External-links" class="headerlink" title="External links"></a>External links</h2><ul>
<li><a href="http://wordpress.org/" target="_blank" rel="noopener">Home Page</a></li>
<li><a href="http://codex.wordpress.org/" target="_blank" rel="noopener">WordPress Online Documentation</a></li>
<li><a href="http://codex.wordpress.org/Updating_WordPress#Manual_Update" target="_blank" rel="noopener">WordPress Manual Update Guide</a></li>
</ul>
<p>WordPress (<a href="https://wiki.debian.org/WordPress?action=info" target="_blank" rel="noopener">最后修改时间 2017-06-10 18:26:06</a>)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/07/04/745/" data-id="cjpkxzikb0005vd81isxdkabk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/">PHP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/debian/">debian</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wordpress/">wordpress</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-codeingitor-form-e8-a1-a8-e5-8d-95-e5-b8-a6-e9-94-99-e8-af-af-e5-92-8cflash-message-e4-bb-a3-e7-a0-81" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/26/codeingitor-form-e8-a1-a8-e5-8d-95-e5-b8-a6-e9-94-99-e8-af-af-e5-92-8cflash-message-e4-bb-a3-e7-a0-81/" class="article-date">
  <time datetime="2017-06-26T09:34:10.000Z" itemprop="datePublished">2017-06-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/大前端！/">大前端！</a>►<a class="article-category-link" href="/categories/大前端！/技术分类/">技术分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/26/codeingitor-form-e8-a1-a8-e5-8d-95-e5-b8-a6-e9-94-99-e8-af-af-e5-92-8cflash-message-e4-bb-a3-e7-a0-81/">CodeIngitor  表单带错误和Flash Message代码</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <pre><code>/* 用于显示系统提示 &amp; 错误消息 组合在一起的表单 */
&lt;?php

$_ci =&amp; get_instance();
$msg = $_ci-&gt;session-&gt;flashdata(&apos;msg&apos;);
if (!empty($msg)) {
    $htm_msg = &lt;&lt;&lt;HTML_FLASH_MSG
    &lt;div class=&quot;alert alert-info&quot; role=&quot;alert&quot;&gt;
        {$msg}
    &lt;/div&gt;
HTML_FLASH_MSG;
    echo $htm_msg;
}
?&gt;

&lt;?php echo validation_errors(&apos;&lt;div class=&quot;alert alert-danger&quot; role=&quot;alert&quot;&gt;&lt;span class=&quot;glyphicon glyphicon-exclamation-sign&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; &apos;, &apos;&lt;/div&gt;&apos;); ?&gt;
&lt;?php echo form_open(&apos;manager/UserManager/index&apos;, array(&apos;class&apos; =&gt; &apos;form-inline&apos;)); ?&gt;
</code></pre><p><img src="https://tech.msla.top/wp-content/uploads/2018/04/5950d4b9d4ded.png" alt="20170626_001_9c15.png" title="CodeIgnitor 表单提交"> 如果客户端不支持 HTML5 也可以提示错误（或者其他的，不一定是 required 属性的校验） <img src="https://tech.msla.top/wp-content/uploads/2018/04/5950d561d557b.png" alt="20170626_001_9fc3.png" title="CodeIngitor 表单带错误和Flash Message代码"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/26/codeingitor-form-e8-a1-a8-e5-8d-95-e5-b8-a6-e9-94-99-e8-af-af-e5-92-8cflash-message-e4-bb-a3-e7-a0-81/" data-id="cjpky1ll10003wi813rovjb1x" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CodeIgnitor/">CodeIgnitor</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/">PHP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ci/">ci</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/表单/">表单</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/错误提示/">错误提示</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-codeigniter-e9-a1-b9-e7-9b-ae-e7-8e-af-e5-a2-83-e9-85-8d-e7-bd-ae" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/02/codeigniter-e9-a1-b9-e7-9b-ae-e7-8e-af-e5-a2-83-e9-85-8d-e7-bd-ae/" class="article-date">
  <time datetime="2017-06-02T02:23:46.000Z" itemprop="datePublished">2017-06-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术分类/">技术分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/02/codeigniter-e9-a1-b9-e7-9b-ae-e7-8e-af-e5-a2-83-e9-85-8d-e7-bd-ae/">CodeIgniter项目 环境配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>CodeIgniter项目 环境配置</strong> 先来看一个实际的例子，项目中存在这样一个配置文件：</p>
<pre><code>$STATUS = &apos;normal&apos;; //测试为test,正式为normal
$KEY_INFO = array(
    &apos;a_test&apos; =&gt; array(
        &apos;key&apos; =&gt; &apos;a_test_key&apos;,
        &apos;value&apos; =&gt; &apos;a_test_value&apos;
    ),
    &apos;a_normal&apos; =&gt; array(
        &apos;key&apos; =&gt; &apos;a_normal_key&apos;,
        &apos;value&apos; =&gt; &apos;a_normal_value&apos;
    ),
    &apos;b_test&apos; =&gt; array(
        &apos;key&apos; =&gt; &apos;b_test_key&apos;,
        &apos;value&apos; =&gt; &apos;b_test_value&apos;
    ),
    &apos;b_normal&apos; =&gt; array(
        &apos;key&apos; =&gt; &apos;b_normal_key&apos;,
        &apos;value&apos; =&gt; &apos;b_normal_value&apos;
    ),
);
</code></pre><p>生产环境和测试环境的开关通过<strong>$STATUS</strong> 变量来控制，而<strong>$STATUS</strong>定义和配置文件在同一个文件中，这意味着每次发布的时候都需要把这个值改成<strong>normal</strong>，测试的时候在调整回来，这样就无缘无故增加了发布的难度和错误产生的几率，每次提交的时候都得小心翼翼。产生该问题的主要原因就是把环境和配置没有分离开，环境和配置耦合在一个文件里了。很多时候我们写一个类的时候也会有类似的做法，将类需要配置的信息直接写死在属性中，不方便调整。 所以多环境的配置是十分有必要的，而Codeigniter框架是支持多环境配置的，环境的配置在<strong>index.php</strong>入口文件的第 21 行</p>
<pre><code>/*
 *---------------------------------------------------------------
 * APPLICATION ENVIRONMENT
 *---------------------------------------------------------------
 *
 * You can load different configurations depending on your
 * current environment. Setting the environment also influences
 * things like logging and error reporting.
 *
 * This can be set to anything, but default usage is:
 *
 *     development
 *     testing
 *     production
 *
 * NOTE: If you change these, also change the error_reporting() code below
 *
 */
    define(&apos;ENVIRONMENT&apos;, &apos;development&apos;);
</code></pre><p>即CI开篇就定义了环境配置，那不同的环境配置会影响到哪些方面？</p>
<p>1、 报错机制。不同的环境设置的报错级别不同，如开发环境（development）会显示所有错误信息，而生成环境（production）则会屏蔽所有错误信息。</p>
<p>2、 加载的配置文件不同，从而实现多套环境配置。</p>
<p>在开发过程中会将数据库配置设置为测试服或本机，而生成环境下会修改为正式服。那这么多环境该如何设置？</p>
<p>先看看application目录下的config目录，该目录主要为系统的配置目录，如数据库配置、路由配置等。以数据库配置为例，当连接DB时，会读取 <strong>config/database.php</strong> 的配置文件，但这种情况是在没有自定义配置时。当我们定义ENVIRONMENT为development是，并创建<strong>config/development/database.php</strong> 时，系统会从此环境来读取数据库配置，而非 <strong>config/database.php</strong></p>
<p>所以针对开发环境我们可以创建development目录，并将开发的配置文件放置于此目录下，创建production目录，用于发布时生产环境的配置，如下图所示：</p>
<p><img src="https://tech.msla.top/wp-content/uploads/2018/04/215255ujs6ou737e3z5eui.png" alt=""></p>
<p><strong>注意:</strong> 对于个人定义的配置文件，若通过$this-&gt;load-&gt;config的方式加载，也适用多套环境，若是通过include加载则不行。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/02/codeigniter-e9-a1-b9-e7-9b-ae-e7-8e-af-e5-a2-83-e9-85-8d-e7-bd-ae/" data-id="cjpky1lkx0001wi81zfcg25jw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CodeIginter/">CodeIginter</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/">PHP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ci/">ci</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发环境/">开发环境</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/环境配置/">环境配置</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-centos7-e5-ae-89-e8-a3-85-fastdfs" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/16/centos7-e5-ae-89-e8-a3-85-fastdfs/" class="article-date">
  <time datetime="2017-03-16T07:17:58.000Z" itemprop="datePublished">2017-03-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术分类/">技术分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/16/centos7-e5-ae-89-e8-a3-85-fastdfs/">centos7 安装 fastdfs</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>安装编译环境</strong>  yum -y install gcc gcc-c++  <strong>其他依赖库（是否必须尚未验证）</strong>  yum -y groupinstall ‘Development Tools’ yum -y install wget</p>
<p><strong>公共依赖，不执行会在编译</strong> <strong>FASTDFS</strong> <strong>时提示找不到</strong> <strong>logger.h</strong>  wget <a href="https://github.com/happyfish100/libfastcommon/archive/master.zip" target="_blank" rel="noopener">https://github.com/happyfish100/libfastcommon/archive/master.zip</a> unzip master.zip cd libfastcommon-master ./make.sh ./make.sh install</p>
<p><strong>安装主体程序</strong>  wget <a href="https://github.com/happyfish100/fastdfs/archive/V5.05.tar.gz" target="_blank" rel="noopener">https://github.com/happyfish100/fastdfs/archive/V5.05.tar.gz</a> tar -zxvf V5.05.tar.gz cd fastdfs-5.05/ ./make.sh ./make.sh install</p>
<p><strong>关闭**</strong>firewall<strong>**：</strong>  systemctl stop firewalld.service #停止firewall systemctl disable firewalld.service #禁止firewall开机启动</p>
<p><strong>测试</strong></p>
<p><strong>连接**</strong>/<strong>**调用</strong></p>
<p>Java 客户端： <a href="https://github.com/happyfish100/fastdfs-client-java" target="_blank" rel="noopener">https://github.com/happyfish100/fastdfs-client-java</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/16/centos7-e5-ae-89-e8-a3-85-fastdfs/" data-id="cjpky130e0008w8813n6lrqyx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/centos/">centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/fastdfs/">fastdfs</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-centos-7-e5-ae-89-e8-a3-85-lnmp" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/16/centos-7-e5-ae-89-e8-a3-85-lnmp/" class="article-date">
  <time datetime="2017-03-16T07:02:41.000Z" itemprop="datePublished">2017-03-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/操作系统/">操作系统</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/16/centos-7-e5-ae-89-e8-a3-85-lnmp/">CentOS 7 安装 LNMP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>FROM <a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-on-centos-7" target="_blank" rel="noopener">DigitalOcean</a></p>
<h2 id="Install-Nginx"><a href="#Install-Nginx" class="headerlink" title="Install Nginx"></a>Install Nginx</h2><pre><code>sudo yum install epel-release


sudo yum install nginx

sudo systemctl start nginx

sudo systemctl enable nginx
</code></pre><h2 id="Install-MySQL-MariaDB"><a href="#Install-MySQL-MariaDB" class="headerlink" title="Install MySQL (MariaDB)"></a>Install MySQL (MariaDB)</h2><pre><code>sudo yum install mariadb-server mariadb

sudo systemctl start mariadb

sudo mysql_secure_installation

sudo systemctl enable mariadb
</code></pre><h2 id="Install-PHP"><a href="#Install-PHP" class="headerlink" title="Install PHP"></a>Install PHP</h2><pre><code>sudo yum install php php-mysql php-fpm

sudo vi /etc/php.ini

/* 设置对应配置为： */
cgi.fix_pathinfo=0

sudo vi /etc/php-fpm.d/www.conf
</code></pre><p>修改相应配置：</p>
<pre><code>listen = /var/run/php-fpm/php-fpm.sock

listen.owner = nobody
listen.group = nobody

user = nginx
group = nginx


sudo systemctl start php-fpm

sudo systemctl enable php-fpm
</code></pre><h2 id="Configure-Nginx-to-Process-PHP-Pages"><a href="#Configure-Nginx-to-Process-PHP-Pages" class="headerlink" title="Configure Nginx to Process PHP Pages"></a>Configure Nginx to Process PHP Pages</h2><pre><code>sudo vi /etc/nginx/conf.d/default.conf
</code></pre><p>修改为类似下面的：</p>
<pre><code>server {
    listen       80;
    server_name  server_domain_name_or_IP;

    # note that these lines are originally from the &quot;location /&quot; block
    root   /usr/share/nginx/html;
    index index.php index.html index.htm;

    location / {
        try_files $uri $uri/ =404;
    }
    error_page 404 /404.html;
    error_page 500 502 503 504 /50x.html;
    location = /50x.html {
        root /usr/share/nginx/html;
    }

    location ~ .php$ {
        try_files $uri =404;
        fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }
}



sudo systemctl restart nginx
</code></pre><h2 id="Test-PHP-Processing-on-your-Web-Server"><a href="#Test-PHP-Processing-on-your-Web-Server" class="headerlink" title="Test PHP Processing on your Web Server"></a>Test PHP Processing on your Web Server</h2><pre><code>sudo vi /usr/share/nginx/html/info.php

&lt;?php phpinfo(); ?&gt;

sudo rm /usr/share/nginx/html/info.php
</code></pre><p>sdfs sd</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/16/centos-7-e5-ae-89-e8-a3-85-lnmp/" data-id="cjpky13030001w881w89ftv2y" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/">PHP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/centos/">centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/lnmp/">lnmp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/">nginx</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-centos-e4-b8-8bpip-e5-92-8cshadowsocks-e7-9a-84-e5-ae-89-e8-a3-85-e4-bd-bf-e7-94-a8" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/27/centos-e4-b8-8bpip-e5-92-8cshadowsocks-e7-9a-84-e5-ae-89-e8-a3-85-e4-bd-bf-e7-94-a8/" class="article-date">
  <time datetime="2016-04-27T06:57:13.000Z" itemprop="datePublished">2016-04-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/操作系统/">操作系统</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/27/centos-e4-b8-8bpip-e5-92-8cshadowsocks-e7-9a-84-e5-ae-89-e8-a3-85-e4-bd-bf-e7-94-a8/">CentOS下pip和shadowsocks的安装使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>centos 我机器上装的时候，不能直接通过yum install pip, 而通过下面的， easy_install 安装成功了。</p>
<blockquote>
<p>可以通过使用 “sudo yum install epel-release” 来安装 python-pip</p>
</blockquote>
<p>另一点要注意的是，配置文件中的名称和值之间虽然是通过冒号分割的，但是还是要留出空格，否则会提示找不到服务器: <strong>“server”:”123.123.123.123” // 错误！</strong> <strong>“server” : “123.123.123.123” // 正确</strong> Pip是安装Python包的工具，提供了安装、列举已安装包、升级以及卸载包的功能。Pip 是对easy_install的取代，提供了和easy_install相同的查找包的功能，因此可以使用easy_install安装的包也同样可以使用pip进行安装。 目前有很多Python程序都是可以直接通过Pip来一键安装了，比如众所周知的Django、Markdown、Shadowsocks等。 简要介绍一下Pip的用法（以安装Shadowsocks举例）： 1、安装package</p>
<pre><code>pip install shadowsocks
</code></pre><p>  2、列出已安装的packages</p>
<pre><code>pip freeze
</code></pre><p>3、安装特定版本的package</p>
<pre><code>pip install shadowsocks=1.3.3′
pip install shadowsocks&gt;1.0,&lt;1.3.3′
</code></pre><p>4、升级已安装的package到最新版本</p>
<pre><code>pip install -U shadowsocks
</code></pre><p>5、卸载已安装的package</p>
<pre><code>pip uninstall shadowsocks
</code></pre><p>6、查询已安装的package</p>
<pre><code>pip search “shadowsocks”
</code></pre><p>安装Pip之前必须要先安装setuptools，安装setuptools之前，必须要安装了Python，这之间的安装过程存在依赖关系，缺一不可。因此，整个过程还是比较麻烦的。 1、 检查Python版本</p>
<pre><code>python –version
</code></pre><p>CentOS 6.5默认安装的Python版本是2.6.6，返回值为：Python 2.6.6 2、 安装setuptools</p>
<pre><code>yum install -y python-setuptools
</code></pre><p>安装完毕后，easy_install命令就可以使用了。 3、 安装pip</p>
<pre><code>easy_install pip
</code></pre><p>通过easy_install安装pip是最为简单的方法。pip默认安装到/usr/bin目录下。 4、 安装shadowsocks</p>
<pre><code>pip install shadowsocks
</code></pre><p>截至目前，通过pip安装的shadowsocks版本为2.8.2 [2018-2-1] Shadowsocks的配置和使用 至于Shadowsocks可以拿来做什么，这里就毋须赘述了。直接开始吧。 1、 创建Shadowsocks的配置文件： CentOS下通过vim创建该配置，运行命令：</p>
<pre><code>vi /etc/config.json
</code></pre><p>内容如下：</p>
<pre><code>{
  &quot;server&quot;:&quot;my_server_ip&quot;,
  &quot;server_port&quot;:8989,
  &quot;local_port&quot;:1080,
  &quot;password&quot;:&quot;teddysun.com&quot;,
  &quot;timeout&quot;:600,
  &quot;method&quot;:&quot;aes-256-cfb&quot;
}
</code></pre><p>  各字段的含义：</p>
<pre><code>server  服务器 IP (IPv4/IPv6)，注意这也将是服务端监听的 IP 地址
server_port  服务器端口
local_port  本地端端口
password  用来加密的密码
timeout  超时时间（秒）
method  加密方法，可选择 “bf-cfb”, “aes-256-cfb”, “des-cfb”, “rc4″, 等等。默认是一种不安全的加密，推荐用 “aes-256-cfb”
</code></pre><p>创建完毕后，赋予权限：</p>
<pre><code>chmod 755 /etc/config.json
</code></pre><p>2、 安装M2Crypto 默认加密方法 table 速度很快，但很不安全。推荐使用 “aes-256-cfb” 或者 “bf-cfb”。请不要使用 “rc4″，它不安全。如果选择 “table” 之外的加密，需要安装 M2Crypto。 先安装依赖包：</p>
<pre><code>yum install -y openssl-devel gcc swig python-devel autoconf libtool
</code></pre><p>安装setuptools：</p>
<pre><code>wget --no-check-certificate https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py
python ez_setup.py install再通过pip安装M2Crypto：
pip install M2Crypto
</code></pre><p>  3、 安装 gevent 安装 gevent可以提高 Shadowsocks 的性能。CentOS下安装gevent依赖libevent和greenlet。 安装libevent：</p>
<pre><code>yum install -y libevent
</code></pre><p>安装greenlet：</p>
<pre><code>pip install greenlet
</code></pre><p>安装gevent：</p>
<pre><code>pip install gevent
</code></pre><p>4、 命令行参数（服务器端启动命令）</p>
<pre><code>ssserver -c /etc/config.json
</code></pre><p>如果想在后台一直运行Shadowsocks，启动命令如下：</p>
<pre><code>nohup ssserver -c /etc/config.json &gt; /dev/null 2&gt;&amp;1 &amp;备注：关于nohup，是可以让程序在后台运行的命令，当执行以上命令后，屏幕输出进程的pid，同时提示：
nohup: ignoring input and redirecting stderr to stdout
</code></pre><p>此时，再次回车一下，回到shell输入命令窗口即可。 同时可以用命令行参数覆盖 config.json 里的设置：</p>
<pre><code>sslocal -s 服务器地址 -p 服务器端口 -l 本地端端口 -k 密码 -m 加密方法
ssserver -p 服务器端口 -k 密码 -m 加密方法
</code></pre><p>备注：sslocal是客户端程序；ssserver是服务端程序。 5、 防火墙设置（如有） 编辑防火墙配置文件/etc/sysconfig/iptables，将服务器端口（server_port）放行。 新增一条防火墙规则：</p>
<pre><code>-A INPUT -m state --state NEW -m tcp -p tcp --dport 8989 -j ACCEPT重启防火墙iptables：
service iptables restart
</code></pre><p>至此，服务器端的Shadowsocks安装和配置完毕。 6、客户端配置 Windows客户端有图形界面也有命令行，我们这里以配置图形化界面的shadowsocks-csharp为例说明。 下载客户端shadowsocks-csharp（最新版1.1.2）： <a href="https://shadowsocks-csharp.googlecode.com/files/shadowsocks-csharp-1.1.2.zip" target="_blank" rel="noopener">https://shadowsocks-csharp.googlecode.com/files/shadowsocks-csharp-1.1.2.zip</a> 解压至任意目录下，双击shadowsocks-csharp.exe运行程序，各参数选项填入： <img src="https://tech.msla.top/wp-content/uploads/2018/04/20140227040626597.png" alt="CentOS下pip和shadowsocks的安装使用"></p>
<pre><code>Server IP:   服务器 IP (IPv4/IPv6)，填入在服务器端设置的IP地址（server）
Server Port: 服务器端口，填入在服务器端设置的端口号（server_port）
Password:    用来加密的密码，填入在服务器端设置的加密密码（password）
Proxy Port:  本地端代理的端口，填入在服务器端设置的本地端端口（local_port）
Encryptor:   加密方法，填入在服务器端设置的加密方法（method）
</code></pre><p>备注：本地客户端填写的参数一定要与服务器端设置的一致才可以。 下面就可以利用浏览器插件无障碍浏览国外网站了。插件的设置过程这里略过。 AutoProxy（用于Firefox）、Proxy SwitchySharp（用于Chrome）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/27/centos-e4-b8-8bpip-e5-92-8cshadowsocks-e7-9a-84-e5-ae-89-e8-a3-85-e4-bd-bf-e7-94-a8/" data-id="cjpky13090003w881kaw0cmdw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/centos/">centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shadowsocks/">shadowsocks</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-474" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/25/474/" class="article-date">
  <time datetime="2016-03-25T02:21:23.000Z" itemprop="datePublished">2016-03-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术分类/">技术分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/25/474/">依赖注入</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="依赖注入"><a href="#依赖注入" class="headerlink" title="依赖注入"></a>依赖注入</h1><p>###1. 依赖<br>如果在 Class A 中，有 Class B 的实例，则称 Class A 对 Class B 有一个依赖。例如下面类 Human 中用到一个 Father 对象，我们就说类 Human 对类 Father 有一个依赖。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Human</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    Father father;</span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Human</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        father = <span class="keyword">new</span> Father();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>仔细看这段代码我们会发现存在一些问题：<br>(1). 如果现在要改变 father 生成方式，如需要用`new Father(String name)`初始化 father，需要修改 Human 代码；<br>(2). 如果想测试不同 Father 对象对 Human 的影响很困难，因为 father 的初始化被写死在了 Human 的构造函数中；<br>(3). 如果`new Father()`过程非常缓慢，单测时我们希望用已经初始化好的 father 对象 Mock 掉这个过程也很困难。</p>
<p>###2. 依赖注入<br>上面将依赖在构造函数中直接初始化是一种 Hard init 方式，弊端在于两个类不够独立，不方便测试。我们还有另外一种 Init 方式，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Human</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    Father father;</span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Human</span><span class="params">(Father father)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.father = father;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码中，我们将 father 对象作为构造函数的一个参数传入。在调用 Human 的构造方法之前外部就已经初始化好了 Father 对象。<strong>像这种非自己主动初始化依赖，而通过外部来传入依赖的方式，我们就称为依赖注入。</strong><br>现在我们发现上面 1 中存在的两个问题都很好解决了，简单的说依赖注入主要有两个好处：<br>(1). 解耦，将依赖之间解耦。<br>(2). 因为已经解耦，所以方便做单元测试，尤其是 Mock 测试。</p>
<p>###3. Java 中的依赖注入</p>
<p>依赖注入的实现有多种途径，而在 Java 中，使用注解是最常用的。通过在字段的声明前添加 @Inject 注解进行标记，来实现依赖对象的自动注入。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Human</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="meta">@Inject</span> Father father;</span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Human</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面这段代码看起来很神奇：只是增加了一个注解，Father 对象就能自动注入了？这个注入过程是怎么完成的？</p>
<p>实质上，如果你只是写了一个 @Inject 注解，Father 并不会被自动注入。你还需要使用一个依赖注入框架，并进行简单的配置。现在 Java 语言中较流行的依赖注入框架有 [Google Guice](<a href="https://github.com/google/guice)、\[Spring\](http://projects.spring.io/spring-framework/)" target="_blank" rel="noopener">https://github.com/google/guice)、\[Spring\](http://projects.spring.io/spring-framework/)</a> 等，而在 Android 上比较流行的有 [RoboGuice](<a href="https://github.com/roboguice/roboguice)、\[Dagger\](http://square.github.io/dagger/)" target="_blank" rel="noopener">https://github.com/roboguice/roboguice)、\[Dagger\](http://square.github.io/dagger/)</a> 等。其中 Dagger 是我现在正在项目中使用的。如果感兴趣，你可以到 [Dagger 实现原理解析](<a href="https://github.com/android-cn/android-open-project-analysis/tree/master/dagger" target="_blank" rel="noopener">https://github.com/android-cn/android-open-project-analysis/tree/master/dagger</a>) 了解更多依赖注入和 Dagger 实现原理相关信息。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/03/25/474/" data-id="cjpkxziju0000vd81lldkl5ch" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/依赖注入/">依赖注入</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-dropbox-e4-bd-bf-e7-94-a8-e6-8a-80-e5-b7-a7" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/19/dropbox-e4-bd-bf-e7-94-a8-e6-8a-80-e5-b7-a7/" class="article-date">
  <time datetime="2016-03-19T11:57:02.000Z" itemprop="datePublished">2016-03-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术分类/">技术分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/19/dropbox-e4-bd-bf-e7-94-a8-e6-8a-80-e5-b7-a7/">Dropbox 使用技巧</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>原文：<a href="https://link.zhihu.com/?target=http%3A//www.labnol.org/internet/best-dropbox-apps/20672/" target="_blank" rel="noopener">The Best Apps for your Dropbox</a></em> Dropbox全球拥有五千万用户，因为这种巨大的普及，围绕Dropbox创建的基于在线存储服务的新的功能和扩展已经形成了一个完整的生态系统。下面是一些最好的应用程序，你应该用你的Dropbox帐户体验一下。 1。使用Dropbox的搭建一个网站或博客 你的Dropbox有一个公共文件夹，你在这个文件夹中添加的文件，网络上任何人都可以访问到，只要他们有一个链接指向该文件。从而可以把所有的HTML，JAVASCRIPT，CSS和图像文件放到这个文件夹中， 定向到你的域名，你的迷你网站就正式上线了。 另外，如果你想有一个更简单的解决方案，使用 <a href="https://link.zhihu.com/?target=http%3A//DropPages.com" target="_blank" rel="noopener">http://DropPages.com</a>，Scriptogr.am 和 <a href="https://link.zhihu.com/?target=http%3A//Pancake.io" target="_blank" rel="noopener">http://Pancake.io</a>这样的应用，它们都可以使用Dropbox免费的发布你的简单的网站。DropPages和Pancake适合定期发布网页，而Scriptogram更适合于博客格式（按时间倒序）。 2。同步Google Docs和Dropbox。 如果你在“Google Docs中写一个文档，离线后在你的Dropbox文件夹内就可以访问到，岂不是很给力？或反之亦然，你在Dropbox中添加一个或多个文件，它们奇迹般地出现在你的Google Docs 帐户中？ 有 一个优秀的服务，叫做insync，可以通过哥小技巧使得你的Google Docs文件可以与你的桌面文件夹同步，你也可以将它与Dropbox整合使用。启动Insync应用程序（在Mac和Windows下都可使用），在 “首选项”下，只是改变默认Insync目录到Dropbox文件夹下。另一种方法是cloudHQ ，不过他们的免费服务有一些限制。 3。在Dropbox中保存电子邮件附件 通过<a href="https://link.zhihu.com/?target=http%3A//attachments.me" target="_blank" rel="noopener">Attachments.me is Shutting Down</a>，你只需要点击一下，就可以快速地将Gmail帐户中的附件保存到你的Dropbox文件夹中。 这样做有两个途径。您既可以安装<a href="https://link.zhihu.com/?target=http%3A//attachments.me" target="_blank" rel="noopener">Attachments.me is Shutting Down</a>的Chrome扩展，只要你正在Gmail中读取消息，就可以发送任意附件到你的Dropbox中，而无需离开Gmail。另外，你可以使用<a href="https://link.zhihu.com/?target=http%3A//attachments.me" target="_blank" rel="noopener">Attachments.me is Shutting Down</a>的网站，来将你的电子邮件附件保存到Dropbox中。 4。保存到网页剪辑到Dropbox Gimme Bar是一个整洁的书签服务，让你剪辑网页，照片和其他一切你在网络上所看到的。它甚至抓取整个网页的截图，所以存档页面的外观酷似你在屏幕上看到的。 你可以将Gimme Bar 帐户与Dropbox帐户连接，它会定期将你保存的所有网页剪报转存到你的Dropbox文件夹中。尽管备份不是及时的。 5。下载在线文件到Dropbox 通过URL Droplet，你可以下载任意在线文件，甚至远程计算机中的文件，到你的Dropbox文件夹。 只需复制和粘贴任何网络文件的网址到URL Droplet，这个应用程序将在后台自动保存该文件到你的Dropbox文件夹。当你想下载文件当你的Dropbox，但你使用的电脑，例如办公室的电脑，登录的不是你的Dropbox帐户时将非常有用。 6。在Dropbox文件夹中接收文件 你希望他人（比如你的客户）将文件上传到你的Dropbox，但又不想与他们分享你的Dropbox文件夹吗？ 有一个称为“DropItToMe”的免费服务，让你可以从任何人、任何地方接收文件，这些文件将直接添加到你的Dropbox中。或者，你可以使用JotForm创建一个在线的表格，通过这个表格上传的任何文件将发送到你的Dropbox。 7。将Dropbox的文件传输到任何云服务 如果你正在寻找一种简单的方式，在不同云服务（例如Dropbox，Google Docs， Picasa等）中传输文件，Otixo是一个近乎完美的解决方案。 Otixo连接到所有流行的云服务，包括Dropbox，并可以让你你在一个地方访问到你所有的在线文件。然后，就像Windows资源管理器或苹果的Finder，你通过简单的拖拽就可以从这个云服务复制或移动文件到另一个云服务。 8。通过电子邮件将文件上传到Dropbox Dropbox，与SugarSync不同，并没有提供一个选项来通过电子邮件上传文件，但有一个叫做“Send To Dropbox”的免费的应用，可以帮助你做到这一点。 一旦你通过这个应用连接到你的Dropbox帐户，它就会提供一个唯一的电子邮件地址，发送到该地址的任何文件将保存到你的Dropbox帐户。从手机上传文件到Dropbox或快速保存Gmail附件保存到Dropbox，这将是很有用的。还有一个DIY 应用备用 。 相关提示：利用Dropbox从手机打印文件。 9。用Dropbox进行无干扰写作 Write Box是最小的用于写作的浏览器应用，自动保存文本到你的Dropbox任意文件夹中。你也可以在Write Box中打开Dropbox中的任意文本文件，并在浏览器中编辑它们。 这个应用没有工具栏，你可以切换到浏览器的全屏模式（按F11）进行更舒适的无干扰写作。按Ctrl + S随时快速同步你编辑文档到Dropbox。 10。让你的Dropbox爆发威力 有了像IFTTT和Dropbox Automator这样的工具，你可以很容易地将Dropbox与其他各种服务，如Facebook、Evernote、Twitter、Instagram等整合，做一些非常有意思的东西，否则可能需要编程。 例 如，你可以设置一个任务，只要在你的Dropbox文件夹添加图片将自动上传到Facebook。或设置任务，当你在指定的Dropbox文件夹添加电子 书或者其他文档时，自动将其添加到你的Kindle。可能性是无穷无尽的，如果你花一些时间理解IFTTT，它可能会是Dropbox所需的唯一插件。 <strong>还有..</strong> 这些应用使用OAuth连接到Dropbox，这样你不用分别去登录它们。这就是说，如果你已经尝试了一个Dropbox应用，并且以后不打算再使用它，到这里，并从你的帐户中永久删除该应用程序。 喜欢它的话。这里有更多关于Dropbox的技巧和窍门。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/03/19/dropbox-e4-bd-bf-e7-94-a8-e6-8a-80-e5-b7-a7/" data-id="cjpky1ll60007wi81dpk1ut3k" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dropbox/">dropbox</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/大前端！/">大前端！</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/大前端！/技术分类/">技术分类</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术分类/">技术分类</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CodeIginter/">CodeIginter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CodeIgnitor/">CodeIgnitor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/anyconnect/">anyconnect</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/asp-net/">asp.net</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ci/">ci</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cisco/">cisco</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/date/">date</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/debian/">debian</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/desktop/">desktop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dropbox/">dropbox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fastdfs/">fastdfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iptables/">iptables</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux-jdk-proxy-mysql/">linux jdk proxy mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lnmp/">lnmp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mariadb/">mariadb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oss/">oss</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/owncloud/">owncloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pip/">pip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/post/">post</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python-pip/">python-pip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shadowsocks/">shadowsocks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/time/">time</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/timestamp/">timestamp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wordpress/">wordpress</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/上古卷轴5/">上古卷轴5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/中科大/">中科大</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/依赖注入/">依赖注入</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/内网对外/">内网对外</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开发环境/">开发环境</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文件名/">文件名</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日期时间/">日期时间</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/时间/">时间</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/时间戳/">时间戳</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/枚举/">枚举</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/消息/">消息</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/环境配置/">环境配置</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/表单/">表单</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/路径/">路径</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/转换/">转换</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/远程访问/">远程访问</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/错误提示/">错误提示</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/防火墙/">防火墙</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/阿里云/">阿里云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随机数/">随机数</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CodeIginter/" style="font-size: 10px;">CodeIginter</a> <a href="/tags/CodeIgnitor/" style="font-size: 10px;">CodeIgnitor</a> <a href="/tags/PHP/" style="font-size: 17.5px;">PHP</a> <a href="/tags/anyconnect/" style="font-size: 10px;">anyconnect</a> <a href="/tags/asp-net/" style="font-size: 12.5px;">asp.net</a> <a href="/tags/c/" style="font-size: 10px;">c#</a> <a href="/tags/centos/" style="font-size: 20px;">centos</a> <a href="/tags/ci/" style="font-size: 12.5px;">ci</a> <a href="/tags/cisco/" style="font-size: 10px;">cisco</a> <a href="/tags/date/" style="font-size: 10px;">date</a> <a href="/tags/debian/" style="font-size: 10px;">debian</a> <a href="/tags/desktop/" style="font-size: 10px;">desktop</a> <a href="/tags/dropbox/" style="font-size: 10px;">dropbox</a> <a href="/tags/fastdfs/" style="font-size: 12.5px;">fastdfs</a> <a href="/tags/iptables/" style="font-size: 10px;">iptables</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/linux/" style="font-size: 20px;">linux</a> <a href="/tags/linux-jdk-proxy-mysql/" style="font-size: 10px;">linux jdk proxy mysql</a> <a href="/tags/lnmp/" style="font-size: 10px;">lnmp</a> <a href="/tags/mariadb/" style="font-size: 10px;">mariadb</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/nginx/" style="font-size: 12.5px;">nginx</a> <a href="/tags/oss/" style="font-size: 10px;">oss</a> <a href="/tags/owncloud/" style="font-size: 10px;">owncloud</a> <a href="/tags/pip/" style="font-size: 12.5px;">pip</a> <a href="/tags/post/" style="font-size: 10px;">post</a> <a href="/tags/python-pip/" style="font-size: 12.5px;">python-pip</a> <a href="/tags/shadowsocks/" style="font-size: 10px;">shadowsocks</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/time/" style="font-size: 10px;">time</a> <a href="/tags/timestamp/" style="font-size: 10px;">timestamp</a> <a href="/tags/wordpress/" style="font-size: 10px;">wordpress</a> <a href="/tags/上古卷轴5/" style="font-size: 10px;">上古卷轴5</a> <a href="/tags/中科大/" style="font-size: 10px;">中科大</a> <a href="/tags/依赖注入/" style="font-size: 10px;">依赖注入</a> <a href="/tags/内网对外/" style="font-size: 10px;">内网对外</a> <a href="/tags/开发环境/" style="font-size: 10px;">开发环境</a> <a href="/tags/数据库/" style="font-size: 10px;">数据库</a> <a href="/tags/文件名/" style="font-size: 10px;">文件名</a> <a href="/tags/日期时间/" style="font-size: 10px;">日期时间</a> <a href="/tags/时间/" style="font-size: 10px;">时间</a> <a href="/tags/时间戳/" style="font-size: 10px;">时间戳</a> <a href="/tags/枚举/" style="font-size: 10px;">枚举</a> <a href="/tags/消息/" style="font-size: 10px;">消息</a> <a href="/tags/环境配置/" style="font-size: 10px;">环境配置</a> <a href="/tags/表单/" style="font-size: 10px;">表单</a> <a href="/tags/路径/" style="font-size: 10px;">路径</a> <a href="/tags/转换/" style="font-size: 10px;">转换</a> <a href="/tags/远程访问/" style="font-size: 10px;">远程访问</a> <a href="/tags/错误提示/" style="font-size: 10px;">错误提示</a> <a href="/tags/防火墙/" style="font-size: 10px;">防火墙</a> <a href="/tags/阿里云/" style="font-size: 10px;">阿里云</a> <a href="/tags/随机数/" style="font-size: 10px;">随机数</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/12/12/code-tips/">code-tips</a>
          </li>
        
          <li>
            <a href="/2018/04/19/debian-e4-b8-8b-e4-bd-bf-e7-94-a8-iptables-e9-98-b2-e7-81-ab-e5-a2-99/">Debian下使用iptables防火墙</a>
          </li>
        
          <li>
            <a href="/2017/12/26/centos-7-2-e4-b8-8b-e7-bc-96-e8-af-91-e5-ae-89-e8-a3-85php-7/">CentOS 7.2下编译安装PHP 7</a>
          </li>
        
          <li>
            <a href="/2017/09/26/centos7-mysql-e6-95-b0-e6-8d-ae-e5-ba-93-e5-ae-89-e8-a3-85-e5-92-8c-e9-85-8d-e7-bd-ae/">centos7 mysql数据库安装和配置</a>
          </li>
        
          <li>
            <a href="/2017/09/15/e3-80-90-e8-bd-ac-e3-80-91-e5-88-a9-e7-94-a8-e5-8f-8d-e5-90-91ssh-e4-bb-8e-e5-a4-96-e7-bd-91-e8-ae-bf-e9-97-ae-e5-86-85-e7-bd-91-e4-b8-bb-e6-9c-ba/">【转】利用反向ssh从外网访问内网主机</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>